<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Find your trading edge, using the fastest engine for backtesting, algorithmic trading, and research"><meta name=author content="Oleg Polakow"><link href=https://vectorbt.dev/getting-started/features/ rel=canonical><link rel=icon href=/assets/logo/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.7"><title>Features - vectorbt</title><link rel=stylesheet href=../../assets/stylesheets/main.cd566b2a.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.e6a45f82.min.css><meta name=theme-color content=#4051b5><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4QLCS0J048"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-4QLCS0J048",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4QLCS0J048"></script><meta property=og:title content=Features><meta property=og:type content=website><meta content=https://vectorbt.dev/getting-started/features/ property=og:url><meta property=og:image:url content=/assets/logo/social-512x512.png><meta property=og:image:type content=image/png><meta property=og:description content="Find your trading edge, using the fastest engine for backtesting, algorithmic trading, and research"><meta property=og:locale content=en-GB><link rel=apple-touch-icon sizes=180x180 href=/assets/logo/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/assets/logo/favicon.svg><link rel=icon type=image/png sizes=32x32 href=/assets/logo/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/assets/logo/favicon-16x16.png><link rel=manifest href=/assets/logo/site.webmanifest><link rel=mask-icon href=/assets/logo/safari-pinned-tab.svg color=#1e2029><link rel="shortcut icon" href=/assets/logo/favicon.ico><meta name=msapplication-TileColor content=#1e2029><meta name=msapplication-config content=/assets/logo/browserconfig.xml><meta name=theme-color content=#1e2029></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#features class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> New version of vectorbt is available! Check out <a href=https://vectorbt.pro/ style="color: #ff6e42; text-decoration: underline;">https://vectorbt.pro/</a> ðŸ”¥ </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=vectorbt class="md-header__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../assets/logo/logo-white.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> vectorbt </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Features </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class="md-tabs__link md-tabs__link--active"> Getting started </a> </li> <li class=md-tabs__item> <a href=../../api/ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../../terms/ class=md-tabs__link> Terms </a> </li> <li class=md-tabs__item> <a href=../../vectorbt-pro/ class=md-tabs__link> vectorbt PRO </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=vectorbt class="md-nav__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../assets/logo/logo-white.svg alt=logo> </a> vectorbt </label> <div class=md-nav__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1 checked> <div class="md-nav__link md-nav__link--index "> <a href=../..>Getting started</a> <label for=__nav_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Getting started" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Features <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Features </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#pandas class=md-nav__link> Pandas </a> </li> <li class=md-nav__item> <a href=#data class=md-nav__link> Data </a> </li> <li class=md-nav__item> <a href=#indicators class=md-nav__link> Indicators </a> </li> <li class=md-nav__item> <a href=#signals class=md-nav__link> Signals </a> </li> <li class=md-nav__item> <a href=#modeling class=md-nav__link> Modeling </a> </li> <li class=md-nav__item> <a href=#analysis class=md-nav__link> Analysis </a> </li> <li class=md-nav__item> <a href=#plotting class=md-nav__link> Plotting </a> </li> <li class=md-nav__item> <a href=#extra class=md-nav__link> Extra </a> </li> <li class=md-nav__item> <a href=#want-more class=md-nav__link> Want more? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../installation/ class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../usage/ class=md-nav__link> Usage </a> </li> <li class=md-nav__item> <a href=../resources/ class=md-nav__link> Resources </a> </li> <li class=md-nav__item> <a href=../contributing/ class=md-nav__link> Contributing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <div class="md-nav__link md-nav__link--index "> <a href=../../api/ >API</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=API data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/_settings/ class=md-nav__link> _settings </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../api/base/ >base</a> <label for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=base data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/base/accessors/ class=md-nav__link> accessors </a> </li> <li class=md-nav__item> <a href=../../api/base/array_wrapper/ class=md-nav__link> array_wrapper </a> </li> <li class=md-nav__item> <a href=../../api/base/column_grouper/ class=md-nav__link> column_grouper </a> </li> <li class=md-nav__item> <a href=../../api/base/combine_fns/ class=md-nav__link> combine_fns </a> </li> <li class=md-nav__item> <a href=../../api/base/index_fns/ class=md-nav__link> index_fns </a> </li> <li class=md-nav__item> <a href=../../api/base/indexing/ class=md-nav__link> indexing </a> </li> <li class=md-nav__item> <a href=../../api/base/reshape_fns/ class=md-nav__link> reshape_fns </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../api/data/ >data</a> <label for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=data data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/data/base/ class=md-nav__link> base </a> </li> <li class=md-nav__item> <a href=../../api/data/custom/ class=md-nav__link> custom </a> </li> <li class=md-nav__item> <a href=../../api/data/updater/ class=md-nav__link> updater </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../api/generic/ >generic</a> <label for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=generic data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> generic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/generic/accessors/ class=md-nav__link> accessors </a> </li> <li class=md-nav__item> <a href=../../api/generic/decorators/ class=md-nav__link> decorators </a> </li> <li class=md-nav__item> <a href=../../api/generic/drawdowns/ class=md-nav__link> drawdowns </a> </li> <li class=md-nav__item> <a href=../../api/generic/enums/ class=md-nav__link> enums </a> </li> <li class=md-nav__item> <a href=../../api/generic/nb/ class=md-nav__link> nb </a> </li> <li class=md-nav__item> <a href=../../api/generic/plots_builder/ class=md-nav__link> plots_builder </a> </li> <li class=md-nav__item> <a href=../../api/generic/plotting/ class=md-nav__link> plotting </a> </li> <li class=md-nav__item> <a href=../../api/generic/ranges/ class=md-nav__link> ranges </a> </li> <li class=md-nav__item> <a href=../../api/generic/splitters/ class=md-nav__link> splitters </a> </li> <li class=md-nav__item> <a href=../../api/generic/stats_builder/ class=md-nav__link> stats_builder </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 type=checkbox id=__nav_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../api/indicators/ >indicators</a> <label for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=indicators data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> indicators </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/indicators/basic/ class=md-nav__link> basic </a> </li> <li class=md-nav__item> <a href=../../api/indicators/configs/ class=md-nav__link> configs </a> </li> <li class=md-nav__item> <a href=../../api/indicators/factory/ class=md-nav__link> factory </a> </li> <li class=md-nav__item> <a href=../../api/indicators/nb/ class=md-nav__link> nb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7 type=checkbox id=__nav_2_7> <div class="md-nav__link md-nav__link--index "> <a href=../../api/labels/ >labels</a> <label for=__nav_2_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=labels data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> labels </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/labels/enums/ class=md-nav__link> enums </a> </li> <li class=md-nav__item> <a href=../../api/labels/generators/ class=md-nav__link> generators </a> </li> <li class=md-nav__item> <a href=../../api/labels/nb/ class=md-nav__link> nb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_8 type=checkbox id=__nav_2_8> <div class="md-nav__link md-nav__link--index "> <a href=../../api/messaging/ >messaging</a> <label for=__nav_2_8> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=messaging data-md-level=2> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> messaging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/messaging/telegram/ class=md-nav__link> telegram </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../api/ohlcv_accessors/ class=md-nav__link> ohlcv_accessors </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_10 type=checkbox id=__nav_2_10> <div class="md-nav__link md-nav__link--index "> <a href=../../api/portfolio/ >portfolio</a> <label for=__nav_2_10> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=portfolio data-md-level=2> <label class=md-nav__title for=__nav_2_10> <span class="md-nav__icon md-icon"></span> portfolio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/portfolio/base/ class=md-nav__link> base </a> </li> <li class=md-nav__item> <a href=../../api/portfolio/decorators/ class=md-nav__link> decorators </a> </li> <li class=md-nav__item> <a href=../../api/portfolio/enums/ class=md-nav__link> enums </a> </li> <li class=md-nav__item> <a href=../../api/portfolio/logs/ class=md-nav__link> logs </a> </li> <li class=md-nav__item> <a href=../../api/portfolio/nb/ class=md-nav__link> nb </a> </li> <li class=md-nav__item> <a href=../../api/portfolio/orders/ class=md-nav__link> orders </a> </li> <li class=md-nav__item> <a href=../../api/portfolio/trades/ class=md-nav__link> trades </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../api/px_accessors/ class=md-nav__link> px_accessors </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_12 type=checkbox id=__nav_2_12> <div class="md-nav__link md-nav__link--index "> <a href=../../api/records/ >records</a> <label for=__nav_2_12> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=records data-md-level=2> <label class=md-nav__title for=__nav_2_12> <span class="md-nav__icon md-icon"></span> records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/records/base/ class=md-nav__link> base </a> </li> <li class=md-nav__item> <a href=../../api/records/col_mapper/ class=md-nav__link> col_mapper </a> </li> <li class=md-nav__item> <a href=../../api/records/decorators/ class=md-nav__link> decorators </a> </li> <li class=md-nav__item> <a href=../../api/records/mapped_array/ class=md-nav__link> mapped_array </a> </li> <li class=md-nav__item> <a href=../../api/records/nb/ class=md-nav__link> nb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_13 type=checkbox id=__nav_2_13> <div class="md-nav__link md-nav__link--index "> <a href=../../api/returns/ >returns</a> <label for=__nav_2_13> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=returns data-md-level=2> <label class=md-nav__title for=__nav_2_13> <span class="md-nav__icon md-icon"></span> returns </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/returns/accessors/ class=md-nav__link> accessors </a> </li> <li class=md-nav__item> <a href=../../api/returns/metrics/ class=md-nav__link> metrics </a> </li> <li class=md-nav__item> <a href=../../api/returns/nb/ class=md-nav__link> nb </a> </li> <li class=md-nav__item> <a href=../../api/returns/qs_adapter/ class=md-nav__link> qs_adapter </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../api/root_accessors/ class=md-nav__link> root_accessors </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_15 type=checkbox id=__nav_2_15> <div class="md-nav__link md-nav__link--index "> <a href=../../api/signals/ >signals</a> <label for=__nav_2_15> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=signals data-md-level=2> <label class=md-nav__title for=__nav_2_15> <span class="md-nav__icon md-icon"></span> signals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/signals/accessors/ class=md-nav__link> accessors </a> </li> <li class=md-nav__item> <a href=../../api/signals/enums/ class=md-nav__link> enums </a> </li> <li class=md-nav__item> <a href=../../api/signals/factory/ class=md-nav__link> factory </a> </li> <li class=md-nav__item> <a href=../../api/signals/generators/ class=md-nav__link> generators </a> </li> <li class=md-nav__item> <a href=../../api/signals/nb/ class=md-nav__link> nb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_16 type=checkbox id=__nav_2_16> <div class="md-nav__link md-nav__link--index "> <a href=../../api/utils/ >utils</a> <label for=__nav_2_16> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=utils data-md-level=2> <label class=md-nav__title for=__nav_2_16> <span class="md-nav__icon md-icon"></span> utils </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/utils/array_/ class=md-nav__link> array_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/attr_/ class=md-nav__link> attr_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/checks/ class=md-nav__link> checks </a> </li> <li class=md-nav__item> <a href=../../api/utils/colors/ class=md-nav__link> colors </a> </li> <li class=md-nav__item> <a href=../../api/utils/config/ class=md-nav__link> config </a> </li> <li class=md-nav__item> <a href=../../api/utils/datetime_/ class=md-nav__link> datetime_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/decorators/ class=md-nav__link> decorators </a> </li> <li class=md-nav__item> <a href=../../api/utils/docs/ class=md-nav__link> docs </a> </li> <li class=md-nav__item> <a href=../../api/utils/enum_/ class=md-nav__link> enum_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/figure/ class=md-nav__link> figure </a> </li> <li class=md-nav__item> <a href=../../api/utils/image_/ class=md-nav__link> image_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/mapping/ class=md-nav__link> mapping </a> </li> <li class=md-nav__item> <a href=../../api/utils/math_/ class=md-nav__link> math_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/module_/ class=md-nav__link> module_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/params/ class=md-nav__link> params </a> </li> <li class=md-nav__item> <a href=../../api/utils/random_/ class=md-nav__link> random_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/requests_/ class=md-nav__link> requests_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/schedule_/ class=md-nav__link> schedule_ </a> </li> <li class=md-nav__item> <a href=../../api/utils/tags/ class=md-nav__link> tags </a> </li> <li class=md-nav__item> <a href=../../api/utils/template/ class=md-nav__link> template </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../terms/ >Terms</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Terms data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Terms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../terms/license/ class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../vectorbt-pro/ class=md-nav__link> vectorbt PRO </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#pandas class=md-nav__link> Pandas </a> </li> <li class=md-nav__item> <a href=#data class=md-nav__link> Data </a> </li> <li class=md-nav__item> <a href=#indicators class=md-nav__link> Indicators </a> </li> <li class=md-nav__item> <a href=#signals class=md-nav__link> Signals </a> </li> <li class=md-nav__item> <a href=#modeling class=md-nav__link> Modeling </a> </li> <li class=md-nav__item> <a href=#analysis class=md-nav__link> Analysis </a> </li> <li class=md-nav__item> <a href=#plotting class=md-nav__link> Plotting </a> </li> <li class=md-nav__item> <a href=#extra class=md-nav__link> Extra </a> </li> <li class=md-nav__item> <a href=#want-more class=md-nav__link> Want more? </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=features>Features <img alt=âš¡ class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/26a1.svg title=:zap:><a class=headerlink href=#features title="Permanent link">&para;</a></h1> <h2 id=pandas>Pandas<a class=headerlink href=#pandas title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Pandas acceleration</strong>: Compiled versions of most popular pandas functions, such as mapping, reducing, rolling, grouping, and resamping. For best performance, most operations are done strictly using NumPy and Numba. Attaches a custom accessor on top of pandas to easily switch between pandas and vectorbt functionality.</li> </ul> <div class=highlight><span class=filename>Compute the rolling z-score</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>vectorbt</span> <span class=k>as</span> <span class=nn>vbt</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>numba</span> <span class=kn>import</span> <span class=n>njit</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>big_ts</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>1000</span><span class=p>,</span> <span class=mi>1000</span><span class=p>)))</span>

<span class=go># pandas</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>zscore_nb</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=p>(</span><span class=n>x</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>x</span><span class=p>))</span> <span class=o>/</span> <span class=n>np</span><span class=o>.</span><span class=n>std</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=o>%</span><span class=n>timeit</span> <span class=n>big_ts</span><span class=o>.</span><span class=n>rolling</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>zscore_nb</span><span class=p>,</span> <span class=n>raw</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=go>482 ms Â± 393 Âµs per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>

<span class=go># vectorbt</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>vbt_zscore_nb</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>x</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>zscore_nb</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=o>%</span><span class=n>timeit</span> <span class=n>big_ts</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>rolling_apply</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>vbt_zscore_nb</span><span class=p>)</span>
<span class=go>33.1 ms Â± 1.17 ms per loop (mean Â± std. dev. of 7 runs, 1 loop each)</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Flexible broadcasting</strong>: Mechanism for broadcasting array-like objects of arbitrary shapes, including pandas objects with MultiIndex.</li> </ul> <div class=highlight><span class=filename>Broadcast pandas objects properly</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>sr</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=n>index</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>,</span> <span class=s1>&#39;y&#39;</span><span class=p>,</span> <span class=s1>&#39;z&#39;</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>([[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>]],</span> <span class=n>index</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>,</span> <span class=s1>&#39;y&#39;</span><span class=p>,</span> <span class=s1>&#39;z&#39;</span><span class=p>],</span> <span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>])</span>

<span class=go># pandas</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sr</span> <span class=o>+</span> <span class=n>df</span>
<span class=go>    a   b   c   x   y   z</span>
<span class=go>x NaN NaN NaN NaN NaN NaN</span>
<span class=go>y NaN NaN NaN NaN NaN NaN</span>
<span class=go>z NaN NaN NaN NaN NaN NaN</span>

<span class=go># vectorbt</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sr</span><span class=o>.</span><span class=n>vbt</span> <span class=o>+</span> <span class=n>df</span>
<span class=go>   a  b  c</span>
<span class=go>x  5  6  7</span>
<span class=go>y  6  7  8</span>
<span class=go>z  7  8  9</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Pandas utilities</strong>: Grouping columns, wrapping NumPy arrays, transforming pandas objects and their indexes, and more.</li> </ul> <div class=highlight><span class=filename>Build a symmetric matrix</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>make_symmetric</span><span class=p>()</span>
<span class=go>     0    1    2</span>
<span class=go>0  1.0  2.0  3.0</span>
<span class=go>1  2.0  NaN  NaN</span>
<span class=go>2  3.0  NaN  NaN</span>
</code></pre></div> <h2 id=data>Data<a class=headerlink href=#data title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Data acquisition</strong>: Supports various data providers, such as <strong><a href=https://github.com/ranaroussi/yfinance>Yahoo Finance</a></strong>, <strong><a href=https://github.com/sammchardy/python-binance>Binance</a></strong>, <strong><a href=https://github.com/ccxt/ccxt>CCXT</a></strong> and <strong><a href=https://github.com/alpacahq/alpaca-trade-api-python>Alpaca</a></strong>. Can merge multiple symbols with different index, as well as update them.</li> </ul> <div class=highlight><span class=filename>Download Alpaca data</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>alpaca_data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>AlpacaData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span>
<span class=gp>... </span>    <span class=s2>&quot;AAPL&quot;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s1>&#39;2 hours ago UTC&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s1>&#39;15 minutes ago UTC&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>interval</span><span class=o>=</span><span class=s1>&#39;1m&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>alpaca_data</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
<span class=go>                           Open      High       Low     Close      Volume</span>
<span class=go>timestamp                                                                </span>
<span class=go>2021-12-27 14:04:00+00:00  177.0500  177.0500  177.0500  177.0500    1967</span>
<span class=go>2021-12-27 14:05:00+00:00  177.0500  177.0500  177.0300  177.0500    3218</span>
<span class=go>2021-12-27 14:06:00+00:00  177.0400  177.0400  177.0400  177.0400     873</span>
<span class=gp>... </span>                            <span class=o>...</span>       <span class=o>...</span>       <span class=o>...</span>       <span class=o>...</span>     <span class=o>...</span>
<span class=go>2021-12-27 15:46:00+00:00  177.9500  178.0000  177.8289  177.8850  162778</span>
<span class=go>2021-12-27 15:47:00+00:00  177.8810  177.9600  177.8400  177.9515  123284</span>
<span class=go>2021-12-27 15:48:00+00:00  177.9600  178.0500  177.9600  178.0100  159700</span>

<span class=go>[105 rows x 5 columns]</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Data generation</strong>: Supports various (random) data generators, such as <strong><a href=https://en.wikipedia.org/wiki/Geometric_Brownian_motion>GBM</a></strong>.</li> </ul> <div class=highlight><span class=filename>Generate random data using Geometric Brownian Motion</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>gbm_data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>GBMData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span>
<span class=gp>... </span>    <span class=nb>list</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>)),</span>
<span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s1>&#39;2020-01-01&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s1>&#39;2021-01-01&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>gbm_data</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>showlegend</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</code></pre></div> <p><img alt src=/assets/images/features_gbm_data.svg></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Scheduled data updates</strong>: Can periodically update any previously downloaded data.</li> </ul> <div class=highlight><span class=filename>Append random data every 5 seconds</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>MyDataUpdater</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>DataUpdater</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>count_limit</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=gp>... </span>        <span class=n>prev_index_len</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>wrapper</span><span class=o>.</span><span class=n>index</span><span class=p>)</span>
<span class=gp>... </span>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
<span class=gp>... </span>        <span class=n>new_index_len</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>wrapper</span><span class=o>.</span><span class=n>index</span><span class=p>)</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Data updated with </span><span class=si>{</span><span class=n>new_index_len</span> <span class=o>-</span> <span class=n>prev_index_len</span><span class=si>}</span><span class=s2> data points&quot;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>GBMData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=s1>&#39;SYMBOL&#39;</span><span class=p>,</span> <span class=n>start</span><span class=o>=</span><span class=s1>&#39;1 minute ago&#39;</span><span class=p>,</span> <span class=n>freq</span><span class=o>=</span><span class=s1>&#39;1s&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_updater</span> <span class=o>=</span> <span class=n>MyDataUpdater</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_updater</span><span class=o>.</span><span class=n>update_every</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=s1>&#39;seconds&#39;</span><span class=p>)</span>
<span class=go>Data updated with 5 data points</span>
<span class=go>Data updated with 5 data points</span>
<span class=gp>...</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Data preparation</strong>: Transformation, rescaling, and normalization of data. Custom splitters for cross-validation. Supports <strong><a href=https://github.com/scikit-learn/scikit-learn>Scikit-Learn</a></strong> splitters, such as for K-Folds cross-validation.</li> </ul> <div class=highlight><span class=filename>Split time series data</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span><span class=p>,</span> <span class=n>timedelta</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>index</span> <span class=o>=</span> <span class=p>[</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2020</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=o>+</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sr</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>index</span><span class=p>)),</span> <span class=n>index</span><span class=o>=</span><span class=n>index</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sr</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>rolling_split</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>window_len</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> 
<span class=gp>... </span>    <span class=n>set_lens</span><span class=o>=</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> 
<span class=gp>... </span>    <span class=n>left_to_right</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> 
<span class=gp>... </span>    <span class=n>plot</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> 
<span class=gp>... </span>    <span class=n>trace_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;train&#39;</span><span class=p>,</span> <span class=s1>&#39;valid&#39;</span><span class=p>,</span> <span class=s1>&#39;test&#39;</span><span class=p>])</span>
</code></pre></div> <p><img alt src=/assets/images/features_rolling_split.svg></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Labeling for ML</strong>: Discrete and continuous label generation for effective training of ML models.</li> </ul> <div class=highlight><span class=filename>Identify local extrema</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>cumprod</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=o>-</span><span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>LEXLB</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>)</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/features_local_extrema.svg></p> <h2 id=indicators>Indicators<a class=headerlink href=#indicators title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Technical indicators</strong>: Most popular technical indicators with full Numba support, including Moving Average, Bollinger Bands, RSI, Stochastic, MACD, and more. Out-of-the-box support for 99% indicators in <strong><a href=https://github.com/bukosabino/ta>Technical Analysis Library</a></strong>, <strong><a href=https://github.com/twopirllc/pandas-ta>Pandas TA</a></strong>, and <strong><a href=https://github.com/mrjbq7/ta-lib>TA-Lib</a></strong> thanks to built-in parsers. Each indicator is wrapped with the vectorbt's indicator engine and thus accepts arbitrary hyperparameter combinations - from arrays to Cartesian products.</li> </ul> <div class=highlight><span class=filename>Compute 2 moving averages at once</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>float</span><span class=p>)</span>

<span class=go># built-in</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>MA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span><span class=o>.</span><span class=n>ma</span>
<span class=go>ma_window    2    3</span>
<span class=go>0          NaN  NaN</span>
<span class=go>1          1.5  NaN</span>
<span class=go>2          2.5  2.0</span>
<span class=go>3          3.5  3.0</span>
<span class=go>4          4.5  4.0</span>

<span class=go># ta support</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>ta</span><span class=p>(</span><span class=s1>&#39;SMAIndicator&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span><span class=o>.</span><span class=n>sma_indicator</span>
<span class=go>smaindicator_window    2    3</span>
<span class=go>0                    NaN  NaN</span>
<span class=go>1                    1.5  NaN</span>
<span class=go>2                    2.5  2.0</span>
<span class=go>3                    3.5  3.0</span>
<span class=go>4                    4.5  4.0</span>

<span class=go># pandas-ta support</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>pandas_ta</span><span class=p>(</span><span class=s1>&#39;SMA&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span><span class=o>.</span><span class=n>sma</span>
<span class=go>sma_length    2    3</span>
<span class=go>0           NaN  NaN</span>
<span class=go>1           1.5  NaN</span>
<span class=go>2           2.5  2.0</span>
<span class=go>3           3.5  3.0</span>
<span class=go>4           4.5  4.0</span>

<span class=go># TA-Lib support</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>talib</span><span class=p>(</span><span class=s1>&#39;SMA&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span><span class=o>.</span><span class=n>real</span>
<span class=go>sma_timeperiod    2    3</span>
<span class=go>0               NaN  NaN</span>
<span class=go>1               1.5  NaN</span>
<span class=go>2               2.5  2.0</span>
<span class=go>3               3.5  3.0</span>
<span class=go>4               4.5  4.0</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Indicator factory</strong>: Sophisticated factory for building custom technical indicators of any complexity. Takes a function and does all the magic for you: generates an indicator skeleton that takes inputs and parameters of any shape and type, and runs the vectorbt's indicator engine. The easiest and most flexible way to create indicators you will find in open source.</li> </ul> <div class=highlight><span class=filename>Construct a random indicator</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>input_shape</span><span class=p>,</span> <span class=n>start</span><span class=p>,</span> <span class=n>mu</span><span class=p>,</span> <span class=n>sigma</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>rand_returns</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>normal</span><span class=p>(</span><span class=n>mu</span><span class=p>,</span> <span class=n>sigma</span><span class=p>,</span> <span class=n>input_shape</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>start</span> <span class=o>*</span> <span class=n>vbt</span><span class=o>.</span><span class=n>nb</span><span class=o>.</span><span class=n>nancumprod_nb</span><span class=p>(</span><span class=n>rand_returns</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>RandomInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;start&#39;</span><span class=p>,</span> <span class=s1>&#39;mu&#39;</span><span class=p>,</span> <span class=s1>&#39;sigma&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>require_input_shape</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>seed</span><span class=o>=</span><span class=mi>42</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>RandomInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=p>[</span><span class=mi>100</span><span class=p>,</span> <span class=mi>200</span><span class=p>],</span> <span class=p>[</span><span class=o>-</span><span class=mf>0.01</span><span class=p>,</span> <span class=mf>0.01</span><span class=p>],</span> <span class=mf>0.01</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_start        100         200</span>
<span class=go>custom_mu         -0.01        0.01</span>
<span class=go>custom_sigma       0.01        0.01</span>
<span class=go>0             99.496714  201.531726</span>
<span class=go>1             98.364179  206.729658</span>
<span class=go>2             98.017630  210.383470</span>
<span class=go>3             98.530292  211.499608</span>
<span class=go>4             97.314277  214.762117</span>
</code></pre></div> <h2 id=signals>Signals<a class=headerlink href=#signals title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Signal analysis</strong>: Generation, mapping and reducing, ranking, and distribution analysis of entry and exit signals.</li> </ul> <div class=highlight><span class=filename>Measure each partition of True values</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>mask_sr</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>mask_sr</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>signals</span><span class=o>.</span><span class=n>partition_ranges</span><span class=p>()</span><span class=o>.</span><span class=n>duration</span><span class=o>.</span><span class=n>values</span>
<span class=go>array([3, 2])</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Signal generators</strong>: Random and stop loss (SL, TSL, TP, etc.) signal generators with full Numba support.</li> </ul> <div class=highlight><span class=filename>Generate entries and exits using different probabilities</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>rprobnx</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>RPROBNX</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_shape</span><span class=o>=</span><span class=p>(</span><span class=mi>5</span><span class=p>,),</span>
<span class=gp>... </span>    <span class=n>entry_prob</span><span class=o>=</span><span class=p>[</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>1.</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>exit_prob</span><span class=o>=</span><span class=p>[</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>1.</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_product</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>seed</span><span class=o>=</span><span class=mi>42</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>rprobnx</span><span class=o>.</span><span class=n>entries</span>
<span class=go>rprobnx_entry_prob    0.5    0.5    1.0    0.5</span>
<span class=go>rprobnx_exit_prob     0.5    1.0    0.5    1.0</span>
<span class=go>0                    True   True   True   True</span>
<span class=go>1                   False  False  False  False</span>
<span class=go>2                   False  False  False   True</span>
<span class=go>3                   False  False  False  False</span>
<span class=go>4                   False  False   True   True</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>rprobnx</span><span class=o>.</span><span class=n>exits</span>
<span class=go>rprobnx_entry_prob    0.5    0.5    1.0    1.0</span>
<span class=go>rprobnx_exit_prob     0.5    1.0    0.5    1.0</span>
<span class=go>0                   False  False  False  False</span>
<span class=go>1                   False   True  False   True</span>
<span class=go>2                   False  False  False  False</span>
<span class=go>3                   False  False   True   True</span>
<span class=go>4                    True  False  False  False</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Signal factory</strong>: Signal factory based on indicator factory specialized for iterative signal generation.</li> </ul> <div class=highlight><span class=filename>Place entries and exits using custom functions</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>entry_choice_func</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=n>col</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>exit_choice_func</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=n>to_i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MySignals</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>SignalFactory</span><span class=p>()</span><span class=o>.</span><span class=n>from_choice_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>entry_choice_func</span><span class=o>=</span><span class=n>entry_choice_func</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>exit_choice_func</span><span class=o>=</span><span class=n>exit_choice_func</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entry_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>wait</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>exit_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>wait</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span> <span class=o>=</span> <span class=n>MySignals</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>input_shape</span><span class=o>=</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>entries</span>
<span class=go>       0      1      2</span>
<span class=go>0   True  False  False</span>
<span class=go>1  False   True  False</span>
<span class=go>2  False  False   True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>exits</span>
<span class=go>       0      1      2</span>
<span class=go>0  False  False  False</span>
<span class=go>1  False  False  False</span>
<span class=go>2   True   True   True</span>
</code></pre></div> <h2 id=modeling>Modeling<a class=headerlink href=#modeling title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Portfolio modeling</strong>: The fastest backtesting engine in open source: fills 1,000,000 orders in 70-100ms on Apple M1. Flexible and powerful simulation functions for portfolio modeling, highly optimized for highest performance and lowest memory footprint. Supports two major simulation modes: 1) vectorized backtesting using user-provided arrays, such as orders, signals, and records, and 2) event-driven backtesting using user-defined callbacks. Supports shorting and individual as well as multi-asset mixed portfolios. Combines many features across vectorbt into a single behemoth class.</li> </ul> <div class=highlight><span class=filename>Backtest the Golden Cross</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>,</span> <span class=n>start</span><span class=o>=</span><span class=s1>&#39;2018-01-01&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;Close&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>fast_ma</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>50</span><span class=p>,</span> <span class=n>short_name</span><span class=o>=</span><span class=s1>&#39;fast_ma&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>slow_ma</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>200</span><span class=p>,</span> <span class=n>short_name</span><span class=o>=</span><span class=s1>&#39;slow_ma&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>entries</span> <span class=o>=</span> <span class=n>fast_ma</span><span class=o>.</span><span class=n>ma_crossed_above</span><span class=p>(</span><span class=n>slow_ma</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>exits</span> <span class=o>=</span> <span class=n>fast_ma</span><span class=o>.</span><span class=n>ma_crossed_below</span><span class=p>(</span><span class=n>slow_ma</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span> <span class=n>fees</span><span class=o>=</span><span class=mf>0.005</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>orders</span><span class=o>.</span><span class=n>records_readable</span>
<span class=go>   Order Id  Column                 Timestamp      Size         Price  \\</span>
<span class=go>0         0       0 2019-04-24 00:00:00+00:00  0.018208   5464.866699   </span>
<span class=go>1         1       0 2019-10-26 00:00:00+00:00  0.018208   9244.972656   </span>
<span class=go>2         2       0 2020-02-19 00:00:00+00:00  0.017300   9633.386719   </span>
<span class=go>3         3       0 2020-03-25 00:00:00+00:00  0.017300   6681.062988   </span>
<span class=go>4         4       0 2020-05-21 00:00:00+00:00  0.012600   9081.761719   </span>
<span class=go>5         5       0 2021-06-19 00:00:00+00:00  0.012600  35615.871094   </span>
<span class=go>6         6       0 2021-09-15 00:00:00+00:00  0.009222  48176.347656   </span>

<span class=go>       Fees  Side  </span>
<span class=go>0  0.497512   Buy  </span>
<span class=go>1  0.841647  Sell  </span>
<span class=go>2  0.833272   Buy  </span>
<span class=go>3  0.577901  Sell  </span>
<span class=go>4  0.572151   Buy  </span>
<span class=go>5  2.243800  Sell  </span>
<span class=go>6  2.221473   Buy  </span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>fig</span> <span class=o>=</span> <span class=n>price</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;Close&#39;</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>fast_ma</span><span class=o>.</span><span class=n>ma</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;Fast MA&#39;</span><span class=p>),</span> <span class=n>fig</span><span class=o>=</span><span class=n>fig</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>slow_ma</span><span class=o>.</span><span class=n>ma</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;Slow MA&#39;</span><span class=p>),</span> <span class=n>fig</span><span class=o>=</span><span class=n>fig</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>positions</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>close_trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>visible</span><span class=o>=</span><span class=kc>False</span><span class=p>),</span> <span class=n>fig</span><span class=o>=</span><span class=n>fig</span><span class=p>)</span>
</code></pre></div> <p><img alt src=/assets/images/features_golden_crossover.svg></p> <h2 id=analysis>Analysis<a class=headerlink href=#analysis title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Performance metrics</strong>: Numba-compiled versions of metrics from <strong><a href=https://github.com/quantopian/empyrical>empyrical</a></strong> and their rolling versions. Adapter for <strong><a href=https://github.com/ranaroussi/quantstats>QuantStats</a></strong>.</li> </ul> <div class=highlight><span class=filename>Visualize performance using QuantStats</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;Close&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>returns</span> <span class=o>=</span> <span class=n>price</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>to_returns</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>returns</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>returns</span><span class=o>.</span><span class=n>qs</span><span class=o>.</span><span class=n>plot_snapshot</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/features_qs_plot_snapshot.png></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Stats builder</strong>: Class for building statistics out of custom metrics. Implements a preset of tailored statistics for many backtesting components, such as signals, returns, and portfolio.</li> </ul> <div class=highlight><span class=filename>Analyze the distribution of signals in a mask</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>index</span> <span class=o>=</span> <span class=p>[</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2020</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=o>+</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>7</span><span class=p>)]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>mask</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>mask</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>signals</span><span class=p>(</span><span class=n>freq</span><span class=o>=</span><span class=s1>&#39;d&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>stats</span><span class=p>()</span>
<span class=go>Start                                               0</span>
<span class=go>End                                                 6</span>
<span class=go>Period                                7 days 00:00:00</span>
<span class=go>Total                                               4</span>
<span class=go>Rate [%]                                    57.142857</span>
<span class=go>First Index                                         1</span>
<span class=go>Last Index                                          5</span>
<span class=go>Norm Avg Index [-1, 1]                      -0.083333</span>
<span class=go>Distance: Min                         1 days 00:00:00</span>
<span class=go>Distance: Max                         2 days 00:00:00</span>
<span class=go>Distance: Mean                        1 days 08:00:00</span>
<span class=go>Distance: Std               0 days 13:51:23.063257983</span>
<span class=go>Total Partitions                                    2</span>
<span class=go>Partition Rate [%]                               50.0</span>
<span class=go>Partition Length: Min                 1 days 00:00:00</span>
<span class=go>Partition Length: Max                 3 days 00:00:00</span>
<span class=go>Partition Length: Mean                2 days 00:00:00</span>
<span class=go>Partition Length: Std       1 days 09:56:28.051789035</span>
<span class=go>Partition Distance: Min               2 days 00:00:00</span>
<span class=go>Partition Distance: Max               2 days 00:00:00</span>
<span class=go>Partition Distance: Mean              2 days 00:00:00</span>
<span class=go>Partition Distance: Std                           NaT</span>
<span class=go>dtype: object</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Records and mapped arrays</strong>: In-house data structures for analyzing complex data, such as simulation logs. Fully compiled with Numba.</li> </ul> <div class=highlight><span class=filename>Parse 5 highest slippage values from logs</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;Close&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>slippage</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mf>0.005</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=n>close</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>logs</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>slippage</span><span class=o>=</span><span class=n>slippage</span><span class=p>,</span> <span class=n>log</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>logs</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>req_price_ma</span> <span class=o>=</span> <span class=n>logs</span><span class=o>.</span><span class=n>map_field</span><span class=p>(</span><span class=s1>&#39;req_price&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>res_price_ma</span> <span class=o>=</span> <span class=n>logs</span><span class=o>.</span><span class=n>map_field</span><span class=p>(</span><span class=s1>&#39;res_price&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>slippage_ma</span> <span class=o>=</span> <span class=p>(</span><span class=n>res_price_ma</span> <span class=o>-</span> <span class=n>req_price_ma</span><span class=p>)</span> <span class=o>/</span> <span class=n>req_price_ma</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>slippage_ma</span> <span class=o>=</span> <span class=n>slippage_ma</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>arr</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>abs</span><span class=p>(</span><span class=n>slippage_ma</span><span class=o>.</span><span class=n>values</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>top_slippage_pd</span> <span class=o>=</span> <span class=n>slippage_ma</span><span class=o>.</span><span class=n>top_n</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span><span class=o>.</span><span class=n>to_pd</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>top_slippage_pd</span><span class=p>[</span><span class=o>~</span><span class=n>top_slippage_pd</span><span class=o>.</span><span class=n>isnull</span><span class=p>()]</span>
<span class=go>Date</span>
<span class=go>2017-12-25 00:00:00+00:00    0.001534</span>
<span class=go>2018-06-03 00:00:00+00:00    0.004354</span>
<span class=go>2018-12-03 00:00:00+00:00    0.004663</span>
<span class=go>2019-09-20 00:00:00+00:00    0.004217</span>
<span class=go>2020-11-28 00:00:00+00:00    0.000775</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Trade analysis</strong>: Retrospective analysis of trades from various view points. Supports entry trades, exit trades, and positions.</li> </ul> <div class=highlight><span class=filename>Get the projected return of each buy order</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;Close&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>entry_trades</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span><span class=o>.</span><span class=n>entry_trades</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>returns_pd</span> <span class=o>=</span> <span class=n>entry_trades</span><span class=o>.</span><span class=n>returns</span><span class=o>.</span><span class=n>to_pd</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>returns_pd</span><span class=p>[</span><span class=o>~</span><span class=n>returns_pd</span><span class=o>.</span><span class=n>isnull</span><span class=p>()]</span>
<span class=go>Date</span>
<span class=go>2017-11-12 00:00:00+00:00    0.742975</span>
<span class=go>2019-08-30 00:00:00+00:00   -0.081744</span>
<span class=go>2020-04-21 00:00:00+00:00    0.489072</span>
<span class=go>2020-09-13 00:00:00+00:00    0.262251</span>
<span class=go>2021-03-07 00:00:00+00:00   -0.382155</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Drawdown analysis</strong>: Drawdown statistics of any numeric time series.</li> </ul> <div class=highlight><span class=filename>Plot 3 deepest price dips</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;Close&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>price</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>drawdowns</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>top_n</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
</code></pre></div> <p><img alt src=/assets/images/features_top_drawdowns.svg></p> <h2 id=plotting>Plotting<a class=headerlink href=#plotting title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Data visualization</strong>: Numerous flexible data plotting functions distributed across vectorbt.</li> </ul> <div class=highlight><span class=filename>Plot time series against each other</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>sr1</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>cumprod</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>normal</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mf>0.01</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sr2</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>cumprod</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>normal</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mf>0.01</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sr1</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot_against</span><span class=p>(</span><span class=n>sr2</span><span class=p>)</span>
</code></pre></div> <p><img alt src=/assets/images/features_plot_against.svg></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Figures and widgets</strong>: Custom interactive figures and widgets using <strong><a href=https://github.com/plotly/plotly.py>Plotly</a></strong>, such as Heatmap and Volume. All custom widgets have dedicated methods for efficiently updating their state.</li> </ul> <div class=highlight><span class=filename>Plot a volume</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>volume_widget</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>plotting</span><span class=o>.</span><span class=n>Volume</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>data</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>randint</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>)),</span>
<span class=gp>... </span>    <span class=n>x_labels</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>y_labels</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;e&#39;</span><span class=p>,</span> <span class=s1>&#39;f&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>z_labels</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;g&#39;</span><span class=p>,</span> <span class=s1>&#39;h&#39;</span><span class=p>,</span> <span class=s1>&#39;i&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>volume_widget</span><span class=o>.</span><span class=n>fig</span>
</code></pre></div> <p><img alt src=/assets/images/features_volume.svg></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Plots builder</strong>: Class for building plots out of custom subplots. Implements a preset of tailored subplots for many backtesting components, such as signals, returns, and portfolio.</li> </ul> <div class=highlight><span class=filename>Plot various portfolio balances</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;Close&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>subplots</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;cash&#39;</span><span class=p>,</span> <span class=s1>&#39;assets&#39;</span><span class=p>,</span> <span class=s1>&#39;value&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>show_svg</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/features_portfolio_plot.svg></p> <h2 id=extra>Extra<a class=headerlink href=#extra title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Notifications</strong>: Telegram bot based on <strong><a href=https://github.com/python-telegram-bot/python-telegram-bot>Python Telegram Bot</a></strong>.</li> </ul> <div class=highlight><span class=filename>Launch a bot that returns the latest ticker on Binance</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>telegram.ext</span> <span class=kn>import</span> <span class=n>CommandHandler</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>ccxt</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>BinanceTickerBot</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>TelegramBot</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nd>@property</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=nf>custom_handlers</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>CommandHandler</span><span class=p>(</span><span class=s1>&#39;get&#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>get</span><span class=p>),</span>
<span class=gp>...</span>
<span class=gp>... </span>    <span class=nd>@property</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=nf>help_message</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=s2>&quot;Type /get [symbol] to get the latest ticker on Binance.&quot;</span>
<span class=gp>...</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>update</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=gp>... </span>        <span class=n>chat_id</span> <span class=o>=</span> <span class=n>update</span><span class=o>.</span><span class=n>effective_chat</span><span class=o>.</span><span class=n>id</span>
<span class=gp>... </span>        <span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>            <span class=n>ticker</span> <span class=o>=</span> <span class=n>ccxt</span><span class=o>.</span><span class=n>binance</span><span class=p>()</span><span class=o>.</span><span class=n>fetchTicker</span><span class=p>(</span><span class=n>context</span><span class=o>.</span><span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<span class=gp>... </span>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=gp>... </span>            <span class=bp>self</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>chat_id</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<span class=gp>... </span>            <span class=k>return</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>chat_id</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>ticker</span><span class=p>[</span><span class=s1>&#39;last&#39;</span><span class=p>]))</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>bot</span> <span class=o>=</span> <span class=n>BinanceTickerBot</span><span class=p>(</span><span class=n>token</span><span class=o>=</span><span class=s1>&#39;YOUR_TOKEN&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>bot</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>General utilities</strong>: Scheduling using <strong><a href=https://github.com/dbader/schedule>schedule</a></strong>, templates, decorators, configs, and more.</li> </ul> <div class=highlight><span class=filename>Every 10 seconds display the latest Bitcoin trades on Binance</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.utils.datetime_</span> <span class=kn>import</span> <span class=n>datetime_to_ms</span><span class=p>,</span> <span class=n>to_tzaware_datetime</span><span class=p>,</span> <span class=n>get_utc_tz</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>IPython.display</span> <span class=kn>import</span> <span class=n>SVG</span><span class=p>,</span> <span class=n>display</span><span class=p>,</span> <span class=n>clear_output</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>exchange</span> <span class=o>=</span> <span class=n>ccxt</span><span class=o>.</span><span class=n>binance</span><span class=p>()</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>job_func</span><span class=p>():</span>
<span class=gp>... </span>    <span class=n>since</span> <span class=o>=</span> <span class=n>datetime_to_ms</span><span class=p>(</span><span class=n>to_tzaware_datetime</span><span class=p>(</span><span class=s1>&#39;10 seconds ago UTC&#39;</span><span class=p>,</span> <span class=n>tz</span><span class=o>=</span><span class=n>get_utc_tz</span><span class=p>()))</span>
<span class=gp>... </span>    <span class=n>trades</span> <span class=o>=</span> <span class=n>exchange</span><span class=o>.</span><span class=n>fetch_trades</span><span class=p>(</span><span class=s1>&#39;BTC/USDT&#39;</span><span class=p>,</span> <span class=n>since</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>price</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>({</span><span class=n>t</span><span class=p>[</span><span class=s1>&#39;datetime&#39;</span><span class=p>]:</span> <span class=n>t</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>trades</span><span class=p>})</span>
<span class=gp>... </span>    <span class=n>svg</span> <span class=o>=</span> <span class=n>price</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span><span class=o>.</span><span class=n>to_image</span><span class=p>(</span><span class=nb>format</span><span class=o>=</span><span class=s2>&quot;svg&quot;</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>clear_output</span><span class=p>()</span>
<span class=gp>... </span>    <span class=n>display</span><span class=p>(</span><span class=n>SVG</span><span class=p>(</span><span class=n>svg</span><span class=p>))</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>scheduler</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>ScheduleManager</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>scheduler</span><span class=o>.</span><span class=n>every</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=s1>&#39;seconds&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>do</span><span class=p>(</span><span class=n>job_func</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>scheduler</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/features_scheduler.svg></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Caching</strong>: Property and method decorators for caching most frequently used objects.</li> </ul> <div class=highlight><span class=filename>Create a cached method and disable it globally</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>time</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>MyClass</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nd>@vbt</span><span class=o>.</span><span class=n>cached_method</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=nf>get_elapsed</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_inst</span> <span class=o>=</span> <span class=n>MyClass</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_inst</span><span class=o>.</span><span class=n>get_elapsed</span><span class=p>()</span>
<span class=go>0.00010895729064941406</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_inst</span><span class=o>.</span><span class=n>get_elapsed</span><span class=p>()</span>
<span class=go>0.00010895729064941406</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>get_elapsed_cond</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>CacheCondition</span><span class=p>(</span><span class=n>instance</span><span class=o>=</span><span class=n>my_inst</span><span class=p>,</span> <span class=n>func</span><span class=o>=</span><span class=s1>&#39;get_elapsed&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>caching</span><span class=p>[</span><span class=s1>&#39;blacklist&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>get_elapsed_cond</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_inst</span><span class=o>.</span><span class=n>get_elapsed</span><span class=p>()</span>
<span class=go>0.01081395149230957</span>
</code></pre></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>Persistance</strong>: Most Python objects including data and portfolio can be saved to a file and retrieved back using <strong><a href=https://github.com/uqfoundation/dill>Dill</a></strong>.</li> </ul> <div class=highlight><span class=filename>Simulate, save, and load back a portfolio</span><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;Close&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s1>&#39;my_pf.pkl&#39;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s1>&#39;my_pf.pkl&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>total_return</span><span class=p>()</span>
<span class=go>5.96813681074424</span>
</code></pre></div> <h2 id=want-more>Want more?<a class=headerlink href=#want-more title="Permanent link">&para;</a></h2> <p>Discover the features of <a href=https://vectorbt.pro/ >vectorbt PRO</a> <img alt=ðŸš€ class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/1f680.svg title=:rocket:></p> <footer class=sponsorship> <hr> <a href=https://github.com/sponsors/polakowo title="Become a sponsor"> <span class="twemoji heart-throb-hover"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path fill-rule=evenodd d="M7.655 14.916 8 14.25l.345.666a.752.752 0 0 1-.69 0zm0 0L8 14.25l.345.666.002-.001.006-.003.018-.01a7.643 7.643 0 0 0 .31-.17 22.08 22.08 0 0 0 3.433-2.414C13.956 10.731 16 8.35 16 5.5 16 2.836 13.914 1 11.75 1 10.203 1 8.847 1.802 8 3.02 7.153 1.802 5.797 1 4.25 1 2.086 1 0 2.836 0 5.5c0 2.85 2.045 5.231 3.885 6.818a22.075 22.075 0 0 0 3.744 2.584l.018.01.006.003h.002z"/></svg> </span> </a> <hr> </footer> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../.. class="md-footer__link md-footer__link--prev" aria-label="Previous: Getting started" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Getting started </div> </div> </a> <a href=../installation/ class="md-footer__link md-footer__link--next" aria-label="Next: Installation" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Installation </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021 Oleg Polakow. All rights reserved. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/polakowo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.instant", "search.suggest", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.22074ed6.min.js"}</script> <script src=../../assets/javascripts/bundle.01de222e.min.js></script> <script src=../../assets/javascripts/extra.js></script> </body> </html>