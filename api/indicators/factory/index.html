<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A factory for building new indicators with ease."><meta name=author content="Oleg Polakow"><link href=https://vectorbt.dev/api/indicators/factory/ rel=canonical><link href=../configs/ rel=prev><link href=../nb/ rel=next><link rel=icon href=/assets/logo/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.5"><title>factory - vectorbt</title><link rel=stylesheet href=../../../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-4QLCS0J048"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-4QLCS0J048",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-4QLCS0J048",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta property=og:title content=factory><meta property=og:type content=website><meta content=https://vectorbt.dev/api/indicators/factory/ property=og:url><meta property=og:image:url content=/assets/logo/social-512x512.png><meta property=og:image:type content=image/png><meta property=og:description content="A factory for building new indicators with ease."><meta property=og:locale content=en-GB><link rel=apple-touch-icon sizes=180x180 href=/assets/logo/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/assets/logo/favicon.svg><link rel=icon type=image/png sizes=32x32 href=/assets/logo/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/assets/logo/favicon-16x16.png><link rel=manifest href=/assets/logo/site.webmanifest><link rel=mask-icon href=/assets/logo/safari-pinned-tab.svg color=#1e2029><link rel="shortcut icon" href=/assets/logo/favicon.ico><meta name=msapplication-TileColor content=#1e2029><meta name=msapplication-config content=/assets/logo/browserconfig.xml><meta name=theme-color content=#1e2029></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#vectorbt.indicators.factory class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> Get access to <a href=https://vectorbt.pro/ style="color: #ff6e42; text-decoration: underline;">vectorbt PRO</a> and join our quant army! </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=vectorbt class="md-header__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../../assets/logo/logo-white.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> vectorbt </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> factory </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Getting started </a> </li> <li class=md-tabs__item> <a href=../../../documentation/ class=md-tabs__link> Documentation </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> API </a> </li> <li class=md-tabs__item> <a href=../../../terms/ class=md-tabs__link> Terms </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=vectorbt class="md-nav__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../../assets/logo/logo-white.svg alt=logo> </a> vectorbt </label> <div class=md-nav__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_1 type=checkbox id=__nav_1> <div class="md-nav__link md-nav__link--index "> <a href=../../..>Getting started</a> <label for=__nav_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Getting started" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/features/ class=md-nav__link> Features </a> </li> <li class=md-nav__item> <a href=../../../getting-started/installation/ class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../../../getting-started/usage/ class=md-nav__link> Usage </a> </li> <li class=md-nav__item> <a href=../../../getting-started/resources/ class=md-nav__link> Resources </a> </li> <li class=md-nav__item> <a href=../../../getting-started/contributing/ class=md-nav__link> Contributing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../documentation/ class=md-nav__link> Documentation </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >API</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=API data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../_settings/ class=md-nav__link> _settings </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../base/ >base</a> <label for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=base data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../base/accessors/ class=md-nav__link> accessors </a> </li> <li class=md-nav__item> <a href=../../base/array_wrapper/ class=md-nav__link> array_wrapper </a> </li> <li class=md-nav__item> <a href=../../base/column_grouper/ class=md-nav__link> column_grouper </a> </li> <li class=md-nav__item> <a href=../../base/combine_fns/ class=md-nav__link> combine_fns </a> </li> <li class=md-nav__item> <a href=../../base/index_fns/ class=md-nav__link> index_fns </a> </li> <li class=md-nav__item> <a href=../../base/indexing/ class=md-nav__link> indexing </a> </li> <li class=md-nav__item> <a href=../../base/reshape_fns/ class=md-nav__link> reshape_fns </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../data/ >data</a> <label for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=data data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/base/ class=md-nav__link> base </a> </li> <li class=md-nav__item> <a href=../../data/custom/ class=md-nav__link> custom </a> </li> <li class=md-nav__item> <a href=../../data/updater/ class=md-nav__link> updater </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <div class="md-nav__link md-nav__link--index "> <a href=../../generic/ >generic</a> <label for=__nav_3_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=generic data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> generic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../generic/accessors/ class=md-nav__link> accessors </a> </li> <li class=md-nav__item> <a href=../../generic/decorators/ class=md-nav__link> decorators </a> </li> <li class=md-nav__item> <a href=../../generic/drawdowns/ class=md-nav__link> drawdowns </a> </li> <li class=md-nav__item> <a href=../../generic/enums/ class=md-nav__link> enums </a> </li> <li class=md-nav__item> <a href=../../generic/nb/ class=md-nav__link> nb </a> </li> <li class=md-nav__item> <a href=../../generic/plots_builder/ class=md-nav__link> plots_builder </a> </li> <li class=md-nav__item> <a href=../../generic/plotting/ class=md-nav__link> plotting </a> </li> <li class=md-nav__item> <a href=../../generic/ranges/ class=md-nav__link> ranges </a> </li> <li class=md-nav__item> <a href=../../generic/splitters/ class=md-nav__link> splitters </a> </li> <li class=md-nav__item> <a href=../../generic/stats_builder/ class=md-nav__link> stats_builder </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >indicators</a> <label for=__nav_3_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=indicators data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> indicators </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../basic/ class=md-nav__link> basic </a> </li> <li class=md-nav__item> <a href=../configs/ class=md-nav__link> configs </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> factory <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> factory </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#naive-approach class=md-nav__link> Naive approach </a> </li> <li class=md-nav__item> <a href=#run-and-run_combs-methods class=md-nav__link> run and run_combs methods </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=#inputs class=md-nav__link> Inputs </a> </li> <li class=md-nav__item> <a href=#outputs class=md-nav__link> Outputs </a> </li> <li class=md-nav__item> <a href=#without-numba class=md-nav__link> Without Numba </a> </li> <li class=md-nav__item> <a href=#raw-outputs-and-caching class=md-nav__link> Raw outputs and caching </a> </li> <li class=md-nav__item> <a href=#custom-properties-and-methods class=md-nav__link> Custom properties and methods </a> </li> <li class=md-nav__item> <a href=#helper-properties-and-methods class=md-nav__link> Helper properties and methods </a> </li> <li class=md-nav__item> <a href=#indexing class=md-nav__link> Indexing </a> </li> <li class=md-nav__item> <a href=#ta-lib class=md-nav__link> TA-Lib </a> </li> <li class=md-nav__item> <a href=#stats class=md-nav__link> Stats </a> </li> <li class=md-nav__item> <a href=#plots class=md-nav__link> Plots </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.build_columns class=md-nav__link> build_columns() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.combine_objs class=md-nav__link> combine_objs() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.params_to_list class=md-nav__link> params_to_list() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.prepare_params class=md-nav__link> prepare_params() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.run_pipeline class=md-nav__link> run_pipeline() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase class=md-nav__link> IndicatorBase() </a> <nav class=md-nav aria-label=IndicatorBase()> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.in_output_names class=md-nav__link> in_output_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.indexing_func class=md-nav__link> indexing_func() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.input_names class=md-nav__link> input_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.level_names class=md-nav__link> level_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.output_flags class=md-nav__link> output_flags </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.output_names class=md-nav__link> output_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.param_names class=md-nav__link> param_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.run class=md-nav__link> run() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.run_combs class=md-nav__link> run_combs() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.short_name class=md-nav__link> short_name </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory class=md-nav__link> IndicatorFactory() </a> <nav class=md-nav aria-label=IndicatorFactory()> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.find_ta_indicator class=md-nav__link> find_ta_indicator() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_apply_func class=md-nav__link> from_apply_func() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_custom_func class=md-nav__link> from_custom_func() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_pandas_ta class=md-nav__link> from_pandas_ta() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_ta class=md-nav__link> from_ta() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_talib class=md-nav__link> from_talib() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.get_pandas_ta_indicators class=md-nav__link> get_pandas_ta_indicators() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.get_ta_indicators class=md-nav__link> get_ta_indicators() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.get_talib_indicators class=md-nav__link> get_talib_indicators() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.parse_pandas_ta_config class=md-nav__link> parse_pandas_ta_config() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.parse_ta_config class=md-nav__link> parse_ta_config() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.MetaIndicatorBase class=md-nav__link> MetaIndicatorBase() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../nb/ class=md-nav__link> nb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <div class="md-nav__link md-nav__link--index "> <a href=../../labels/ >labels</a> <label for=__nav_3_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=labels data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> labels </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../labels/enums/ class=md-nav__link> enums </a> </li> <li class=md-nav__item> <a href=../../labels/generators/ class=md-nav__link> generators </a> </li> <li class=md-nav__item> <a href=../../labels/nb/ class=md-nav__link> nb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <div class="md-nav__link md-nav__link--index "> <a href=../../messaging/ >messaging</a> <label for=__nav_3_8> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=messaging data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> messaging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../messaging/telegram/ class=md-nav__link> telegram </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ohlcv_accessors/ class=md-nav__link> ohlcv_accessors </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_10 type=checkbox id=__nav_3_10> <div class="md-nav__link md-nav__link--index "> <a href=../../portfolio/ >portfolio</a> <label for=__nav_3_10> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=portfolio data-md-level=2> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> portfolio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../portfolio/base/ class=md-nav__link> base </a> </li> <li class=md-nav__item> <a href=../../portfolio/decorators/ class=md-nav__link> decorators </a> </li> <li class=md-nav__item> <a href=../../portfolio/enums/ class=md-nav__link> enums </a> </li> <li class=md-nav__item> <a href=../../portfolio/logs/ class=md-nav__link> logs </a> </li> <li class=md-nav__item> <a href=../../portfolio/nb/ class=md-nav__link> nb </a> </li> <li class=md-nav__item> <a href=../../portfolio/orders/ class=md-nav__link> orders </a> </li> <li class=md-nav__item> <a href=../../portfolio/trades/ class=md-nav__link> trades </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../px_accessors/ class=md-nav__link> px_accessors </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_12 type=checkbox id=__nav_3_12> <div class="md-nav__link md-nav__link--index "> <a href=../../records/ >records</a> <label for=__nav_3_12> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=records data-md-level=2> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../records/base/ class=md-nav__link> base </a> </li> <li class=md-nav__item> <a href=../../records/col_mapper/ class=md-nav__link> col_mapper </a> </li> <li class=md-nav__item> <a href=../../records/decorators/ class=md-nav__link> decorators </a> </li> <li class=md-nav__item> <a href=../../records/mapped_array/ class=md-nav__link> mapped_array </a> </li> <li class=md-nav__item> <a href=../../records/nb/ class=md-nav__link> nb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_13 type=checkbox id=__nav_3_13> <div class="md-nav__link md-nav__link--index "> <a href=../../returns/ >returns</a> <label for=__nav_3_13> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=returns data-md-level=2> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> returns </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../returns/accessors/ class=md-nav__link> accessors </a> </li> <li class=md-nav__item> <a href=../../returns/metrics/ class=md-nav__link> metrics </a> </li> <li class=md-nav__item> <a href=../../returns/nb/ class=md-nav__link> nb </a> </li> <li class=md-nav__item> <a href=../../returns/qs_adapter/ class=md-nav__link> qs_adapter </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../root_accessors/ class=md-nav__link> root_accessors </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_15 type=checkbox id=__nav_3_15> <div class="md-nav__link md-nav__link--index "> <a href=../../signals/ >signals</a> <label for=__nav_3_15> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=signals data-md-level=2> <label class=md-nav__title for=__nav_3_15> <span class="md-nav__icon md-icon"></span> signals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../signals/accessors/ class=md-nav__link> accessors </a> </li> <li class=md-nav__item> <a href=../../signals/enums/ class=md-nav__link> enums </a> </li> <li class=md-nav__item> <a href=../../signals/factory/ class=md-nav__link> factory </a> </li> <li class=md-nav__item> <a href=../../signals/generators/ class=md-nav__link> generators </a> </li> <li class=md-nav__item> <a href=../../signals/nb/ class=md-nav__link> nb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3_16 type=checkbox id=__nav_3_16> <div class="md-nav__link md-nav__link--index "> <a href=../../utils/ >utils</a> <label for=__nav_3_16> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=utils data-md-level=2> <label class=md-nav__title for=__nav_3_16> <span class="md-nav__icon md-icon"></span> utils </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../utils/array_/ class=md-nav__link> array_ </a> </li> <li class=md-nav__item> <a href=../../utils/attr_/ class=md-nav__link> attr_ </a> </li> <li class=md-nav__item> <a href=../../utils/checks/ class=md-nav__link> checks </a> </li> <li class=md-nav__item> <a href=../../utils/colors/ class=md-nav__link> colors </a> </li> <li class=md-nav__item> <a href=../../utils/config/ class=md-nav__link> config </a> </li> <li class=md-nav__item> <a href=../../utils/datetime_/ class=md-nav__link> datetime_ </a> </li> <li class=md-nav__item> <a href=../../utils/decorators/ class=md-nav__link> decorators </a> </li> <li class=md-nav__item> <a href=../../utils/docs/ class=md-nav__link> docs </a> </li> <li class=md-nav__item> <a href=../../utils/enum_/ class=md-nav__link> enum_ </a> </li> <li class=md-nav__item> <a href=../../utils/figure/ class=md-nav__link> figure </a> </li> <li class=md-nav__item> <a href=../../utils/image_/ class=md-nav__link> image_ </a> </li> <li class=md-nav__item> <a href=../../utils/mapping/ class=md-nav__link> mapping </a> </li> <li class=md-nav__item> <a href=../../utils/math_/ class=md-nav__link> math_ </a> </li> <li class=md-nav__item> <a href=../../utils/module_/ class=md-nav__link> module_ </a> </li> <li class=md-nav__item> <a href=../../utils/params/ class=md-nav__link> params </a> </li> <li class=md-nav__item> <a href=../../utils/random_/ class=md-nav__link> random_ </a> </li> <li class=md-nav__item> <a href=../../utils/requests_/ class=md-nav__link> requests_ </a> </li> <li class=md-nav__item> <a href=../../utils/schedule_/ class=md-nav__link> schedule_ </a> </li> <li class=md-nav__item> <a href=../../utils/tags/ class=md-nav__link> tags </a> </li> <li class=md-nav__item> <a href=../../utils/template/ class=md-nav__link> template </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../terms/ >Terms</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Terms data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Terms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../terms/license/ class=md-nav__link> License </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#naive-approach class=md-nav__link> Naive approach </a> </li> <li class=md-nav__item> <a href=#run-and-run_combs-methods class=md-nav__link> run and run_combs methods </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=#inputs class=md-nav__link> Inputs </a> </li> <li class=md-nav__item> <a href=#outputs class=md-nav__link> Outputs </a> </li> <li class=md-nav__item> <a href=#without-numba class=md-nav__link> Without Numba </a> </li> <li class=md-nav__item> <a href=#raw-outputs-and-caching class=md-nav__link> Raw outputs and caching </a> </li> <li class=md-nav__item> <a href=#custom-properties-and-methods class=md-nav__link> Custom properties and methods </a> </li> <li class=md-nav__item> <a href=#helper-properties-and-methods class=md-nav__link> Helper properties and methods </a> </li> <li class=md-nav__item> <a href=#indexing class=md-nav__link> Indexing </a> </li> <li class=md-nav__item> <a href=#ta-lib class=md-nav__link> TA-Lib </a> </li> <li class=md-nav__item> <a href=#stats class=md-nav__link> Stats </a> </li> <li class=md-nav__item> <a href=#plots class=md-nav__link> Plots </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.build_columns class=md-nav__link> build_columns() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.combine_objs class=md-nav__link> combine_objs() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.params_to_list class=md-nav__link> params_to_list() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.prepare_params class=md-nav__link> prepare_params() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.run_pipeline class=md-nav__link> run_pipeline() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase class=md-nav__link> IndicatorBase() </a> <nav class=md-nav aria-label=IndicatorBase()> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.in_output_names class=md-nav__link> in_output_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.indexing_func class=md-nav__link> indexing_func() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.input_names class=md-nav__link> input_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.level_names class=md-nav__link> level_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.output_flags class=md-nav__link> output_flags </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.output_names class=md-nav__link> output_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.param_names class=md-nav__link> param_names </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.run class=md-nav__link> run() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.run_combs class=md-nav__link> run_combs() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorBase.short_name class=md-nav__link> short_name </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory class=md-nav__link> IndicatorFactory() </a> <nav class=md-nav aria-label=IndicatorFactory()> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.find_ta_indicator class=md-nav__link> find_ta_indicator() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_apply_func class=md-nav__link> from_apply_func() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_custom_func class=md-nav__link> from_custom_func() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_pandas_ta class=md-nav__link> from_pandas_ta() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_ta class=md-nav__link> from_ta() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.from_talib class=md-nav__link> from_talib() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.get_pandas_ta_indicators class=md-nav__link> get_pandas_ta_indicators() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.get_ta_indicators class=md-nav__link> get_ta_indicators() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.get_talib_indicators class=md-nav__link> get_talib_indicators() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.parse_pandas_ta_config class=md-nav__link> parse_pandas_ta_config() </a> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.IndicatorFactory.parse_ta_config class=md-nav__link> parse_ta_config() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vectorbt.indicators.factory.MetaIndicatorBase class=md-nav__link> MetaIndicatorBase() </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=vectorbt.indicators.factory>factory <span class=dobjtype>module</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory title="Permanent link">&para;</a></h1> <p>A factory for building new indicators with ease.</p> <p>The indicator factory class <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> offers a convenient way to create technical indicators of any complexity. By providing it with information such as calculation functions and the names of your inputs, parameters, and outputs, it will create a stand-alone indicator class capable of running the indicator for an arbitrary combination of your inputs and parameters. It also creates methods for signal generation and supports common pandas and parameter indexing operations.</p> <p>Each indicator is basically a pipeline that:</p> <ul> <li>Accepts a list of input arrays (for example, OHLCV data)</li> <li>Accepts a list of parameter arrays (for example, window size)</li> <li>Accepts other relevant arguments and keyword arguments</li> <li>For each parameter combination, performs calculation on the input arrays</li> <li>Concatenates results into new output arrays (for example, rolling average)</li> </ul> <p>This pipeline can be well standardized, which is done by <a href=/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline title=vectorbt.indicators.factory.run_pipeline>run_pipeline()</a>.</p> <p><a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> simplifies the usage of <a href=/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline title=vectorbt.indicators.factory.run_pipeline>run_pipeline()</a> by generating and pre-configuring a new Python class with various class methods for running the indicator.</p> <p>Each generated class includes the following features:</p> <ul> <li>Accepts input arrays of any compatible shape thanks to broadcasting</li> <li>Accepts output arrays written in-place instead of returning</li> <li>Accepts arbitrary parameter grids</li> <li>Supports caching and other optimizations out of the box</li> <li>Supports pandas and parameter indexing</li> <li>Offers helper methods for all inputs, outputs, and properties</li> </ul> <p>Consider the following price DataFrame composed of two columns, one per asset:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>vectorbt</span> <span class=k>as</span> <span class=nn>vbt</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>numba</span> <span class=kn>import</span> <span class=n>njit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span>
<span class=gp>... </span>    <span class=s1>&#39;a&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span>
<span class=gp>... </span>    <span class=s1>&#39;b&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
<span class=gp>... </span><span class=p>},</span> <span class=n>index</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Index</span><span class=p>([</span>
<span class=gp>... </span>    <span class=n>datetime</span><span class=p>(</span><span class=mi>2020</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>datetime</span><span class=p>(</span><span class=mi>2020</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>datetime</span><span class=p>(</span><span class=mi>2020</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>datetime</span><span class=p>(</span><span class=mi>2020</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>datetime</span><span class=p>(</span><span class=mi>2020</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>),</span>
<span class=gp>... </span><span class=p>]))</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>price</span>
<span class=go>            a    b</span>
<span class=go>2020-01-01  1.0  5.0</span>
<span class=go>2020-01-02  2.0  4.0</span>
<span class=go>2020-01-03  3.0  3.0</span>
<span class=go>2020-01-04  4.0  2.0</span>
<span class=go>2020-01-05  5.0  1.0</span>
</code></pre></div> <p>For each column in the DataFrame, let's calculate a simple moving average and get its crossover with price. In particular, we want to test two different window sizes: 2 and 3.</p> <h2 id=naive-approach>Naive approach<a class=headerlink href=#naive-approach title="Permanent link">&para;</a></h2> <p>A naive way of doing this:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>ma_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>concat</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=o>.</span><span class=n>rolling</span><span class=p>(</span><span class=n>window</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span><span class=o>.</span><span class=n>mean</span><span class=p>(),</span>
<span class=gp>... </span>    <span class=n>price</span><span class=o>.</span><span class=n>rolling</span><span class=p>(</span><span class=n>window</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span><span class=o>.</span><span class=n>mean</span><span class=p>(),</span>
<span class=gp>... </span>    <span class=n>keys</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Index</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;ma_window&#39;</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>ma_df</span>
<span class=go>ma_window          2         3</span>
<span class=go>              a    b    a    b</span>
<span class=go>2020-01-01  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-02  1.5  4.5  NaN  NaN</span>
<span class=go>2020-01-03  2.5  3.5  2.0  4.0</span>
<span class=go>2020-01-04  3.5  2.5  3.0  3.0</span>
<span class=go>2020-01-05  4.5  1.5  4.0  2.0</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>above_signals</span> <span class=o>=</span> <span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>tile</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span> <span class=o>&gt;</span> <span class=n>ma_df</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>above_signals</span> <span class=o>=</span> <span class=n>above_signals</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>signals</span><span class=o>.</span><span class=n>first</span><span class=p>(</span><span class=n>after_false</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>above_signals</span>
<span class=go>ma_window              2             3</span>
<span class=go>                a      b      a      b</span>
<span class=go>2020-01-01  False  False  False  False</span>
<span class=go>2020-01-02   True  False  False  False</span>
<span class=go>2020-01-03  False  False   True  False</span>
<span class=go>2020-01-04  False  False  False  False</span>
<span class=go>2020-01-05  False  False  False  False</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>below_signals</span> <span class=o>=</span> <span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>tile</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span> <span class=o>&lt;</span> <span class=n>ma_df</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>below_signals</span> <span class=o>=</span> <span class=n>below_signals</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>signals</span><span class=o>.</span><span class=n>first</span><span class=p>(</span><span class=n>after_false</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>below_signals</span>
<span class=go>ma_window              2             3</span>
<span class=go>                a      b      a      b</span>
<span class=go>2020-01-01  False  False  False  False</span>
<span class=go>2020-01-02  False   True  False  False</span>
<span class=go>2020-01-03  False  False  False   True</span>
<span class=go>2020-01-04  False  False  False  False</span>
<span class=go>2020-01-05  False  False  False  False</span>
</code></pre></div> <p>Now the same using <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;window&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;ma&#39;</span><span class=p>],</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>nb</span><span class=o>.</span><span class=n>rolling_mean_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>above_signals</span> <span class=o>=</span> <span class=n>myind</span><span class=o>.</span><span class=n>price_crossed_above</span><span class=p>(</span><span class=n>myind</span><span class=o>.</span><span class=n>ma</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>below_signals</span> <span class=o>=</span> <span class=n>myind</span><span class=o>.</span><span class=n>price_crossed_below</span><span class=p>(</span><span class=n>myind</span><span class=o>.</span><span class=n>ma</span><span class=p>)</span>
</code></pre></div> <p>The <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> class is used to construct indicator classes from UDFs. First, we provide all the necessary information (indicator conig) to build the facade of the indicator, such as the names of inputs, parameters, and outputs, and the actual calculation function. The factory then generates a self-contained indicator class capable of running arbitrary configurations of inputs and parameters. To run any configuration, we can either use the <code>run</code> method (as we did above) or the <code>run_combs</code> method.</p> <h2 id=run-and-run_combs-methods>run and run_combs methods<a class=headerlink href=#run-and-run_combs-methods title="Permanent link">&para;</a></h2> <p>The main method to run an indicator is <code>run</code>, which accepts arguments based on the config provided to the <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> (see the example above). These arguments include input arrays, in-place output arrays, parameters, and arguments for <a href=/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline title=vectorbt.indicators.factory.run_pipeline>run_pipeline()</a>.</p> <p>The <code>run_combs</code> method takes the same inputs as the method above, but computes all combinations of passed parameters based on a combinatorial function and returns multiple instances that can be compared with each other. For example, this is useful to generate crossover signals of multiple moving averages:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>myind1</span><span class=p>,</span> <span class=n>myind2</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run_combs</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind1</span><span class=o>.</span><span class=n>ma</span>
<span class=go>myind_1_window                  2         3</span>
<span class=go>                 a    b    a    b    a    b</span>
<span class=go>2020-01-01     NaN  NaN  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-02     1.5  4.5  1.5  4.5  NaN  NaN</span>
<span class=go>2020-01-03     2.5  3.5  2.5  3.5  2.0  4.0</span>
<span class=go>2020-01-04     3.5  2.5  3.5  2.5  3.0  3.0</span>
<span class=go>2020-01-05     4.5  1.5  4.5  1.5  4.0  2.0</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind2</span><span class=o>.</span><span class=n>ma</span>
<span class=go>myind_2_window        3                   4</span>
<span class=go>                 a    b    a    b    a    b</span>
<span class=go>2020-01-01     NaN  NaN  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-02     NaN  NaN  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-03     2.0  4.0  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-04     3.0  3.0  2.5  3.5  2.5  3.5</span>
<span class=go>2020-01-05     4.0  2.0  3.5  2.5  3.5  2.5</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind1</span><span class=o>.</span><span class=n>ma_crossed_above</span><span class=p>(</span><span class=n>myind2</span><span class=o>.</span><span class=n>ma</span><span class=p>)</span>
<span class=go>myind_1_window                          2             3</span>
<span class=go>myind_2_window            3             4             4</span>
<span class=go>                   a      b      a      b      a      b</span>
<span class=go>2020-01-01     False  False  False  False  False  False</span>
<span class=go>2020-01-02     False  False  False  False  False  False</span>
<span class=go>2020-01-03      True  False  False  False  False  False</span>
<span class=go>2020-01-04     False  False   True  False   True  False</span>
<span class=go>2020-01-05     False  False  False  False  False  False</span>
</code></pre></div> <p>Its main advantage is that it doesn't need to re-compute each combination thanks to smart caching.</p> <p>To get details on what arguments are accepted by any of the class methods, use <code>help</code>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>help</span><span class=p>(</span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>)</span>
<span class=go>Help on method run:</span>

<span class=go>run(price, window, short_name=&#39;custom&#39;, hide_params=None, hide_default=True, **kwargs) method of builtins.type instance</span>
<span class=go>    Run `Indicator` indicator.</span>

<span class=go>    * Inputs: `price`</span>
<span class=go>    * Parameters: `window`</span>
<span class=go>    * Outputs: `ma`</span>

<span class=go>    Pass a list of parameter names as `hide_params` to hide their column levels.</span>
<span class=go>    Set `hide_default` to False to show the column levels of the parameters with a default value.</span>

<span class=go>    Other keyword arguments are passed to `vectorbt.indicators.factory.run_pipeline`.</span>
</code></pre></div> <h2 id=parameters>Parameters<a class=headerlink href=#parameters title="Permanent link">&para;</a></h2> <p><a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> allows definition of arbitrary parameter grids.</p> <p>Parameters are variables that can hold one or more values. A single value can be passed as a scalar, an array, or any other object. Multiple values are passed as a list or an array (if the flag <code>is_array_like</code> is set to False for that parameter). If there are multiple parameters and each is having multiple values, their values will broadcast to a single shape:</p> <div class=highlight><pre><span></span><code>       p1         p2            result
0       0          1          [(0, 1)]
1  [0, 1]        [2]  [(0, 2), (1, 2)]
2  [0, 1]     [2, 3]  [(0, 2), (1, 3)]
3  [0, 1]  [2, 3, 4]             error
</code></pre></div> <p>To illustrate the usage of parameters in indicators, let's build a basic indicator that returns 1 if the rolling mean is within upper and lower bounds, and -1 if it's outside:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>window</span><span class=p>,</span> <span class=n>lower</span><span class=p>,</span> <span class=n>upper</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>output</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float_</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]):</span>
<span class=gp>... </span>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>window</span><span class=p>,</span> <span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]):</span>
<span class=gp>... </span>            <span class=n>mean</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>price</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>window</span><span class=p>:</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>])</span>
<span class=gp>... </span>            <span class=n>output</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>lower</span> <span class=o>&lt;</span> <span class=n>mean</span> <span class=o>&lt;</span> <span class=n>upper</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>output</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;window&#39;</span><span class=p>,</span> <span class=s1>&#39;lower&#39;</span><span class=p>,</span> <span class=s1>&#39;upper&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>)</span>
</code></pre></div> <p>By default, when <code>per_column</code> is set to False, each parameter is applied to the entire input.</p> <p>One parameter combination:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>window</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>lower</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upper</span><span class=o>=</span><span class=mi>5</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_window         2</span>
<span class=go>custom_lower          3</span>
<span class=go>custom_upper          5</span>
<span class=go>                 a    b</span>
<span class=go>2020-01-01     NaN  NaN</span>
<span class=go>2020-01-02     NaN  NaN</span>
<span class=go>2020-01-03     0.0  1.0</span>
<span class=go>2020-01-04     0.0  1.0</span>
<span class=go>2020-01-05     1.0  0.0</span>
</code></pre></div> <p>Multiple parameter combinations:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>window</span><span class=o>=</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>lower</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upper</span><span class=o>=</span><span class=mi>5</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_window         2         3</span>
<span class=go>custom_lower          3         3</span>
<span class=go>custom_upper          5         5</span>
<span class=go>                 a    b    a    b</span>
<span class=go>2020-01-01     NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-02     NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-03     0.0  1.0  NaN  NaN</span>
<span class=go>2020-01-04     0.0  1.0  0.0  1.0</span>
<span class=go>2020-01-05     1.0  0.0  0.0  0.0</span>
</code></pre></div> <p>Product of parameter combinations:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>window</span><span class=o>=</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>lower</span><span class=o>=</span><span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>upper</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>param_product</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_window                   2                   3</span>
<span class=go>custom_lower          3         4         3         4</span>
<span class=go>custom_upper          5         5         5         5</span>
<span class=go>                 a    b    a    b    a    b    a    b</span>
<span class=go>2020-01-01     NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-02     NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-03     0.0  1.0  0.0  1.0  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-04     0.0  1.0  0.0  0.0  0.0  1.0  0.0  0.0</span>
<span class=go>2020-01-05     1.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0</span>
</code></pre></div> <p>Multiple parameter combinations, one per column:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>window</span><span class=o>=</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>lower</span><span class=o>=</span><span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>upper</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>per_column</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_window    2    3</span>
<span class=go>custom_lower     3    4</span>
<span class=go>custom_upper     5    5</span>
<span class=go>                 a    b</span>
<span class=go>2020-01-01     NaN  NaN</span>
<span class=go>2020-01-02     NaN  NaN</span>
<span class=go>2020-01-03     0.0  NaN</span>
<span class=go>2020-01-04     0.0  0.0</span>
<span class=go>2020-01-05     1.0  0.0</span>
</code></pre></div> <p>Parameter defaults can be passed directly to the <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a> and <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_apply_func title=vectorbt.indicators.factory.IndicatorFactory.from_apply_func>IndicatorFactory.from_apply_func()</a>, and overriden in the run method:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;window&#39;</span><span class=p>,</span> <span class=s1>&#39;lower&#39;</span><span class=p>,</span> <span class=s1>&#39;upper&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>,</span> <span class=n>window</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>lower</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>upper</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>upper</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_window         2</span>
<span class=go>custom_lower          3</span>
<span class=go>custom_upper          5</span>
<span class=go>                 a    b</span>
<span class=go>2020-01-01     NaN  NaN</span>
<span class=go>2020-01-02     NaN  NaN</span>
<span class=go>2020-01-03     0.0  1.0</span>
<span class=go>2020-01-04     0.0  1.0</span>
<span class=go>2020-01-05     1.0  0.0</span>
</code></pre></div> <p>Some parameters are meant to be defined per row, column, or element of the input. By default, if we pass the parameter value as an array, the indicator will treat this array as a list of multiple values - one per input. To make the indicator view this array as a single value, set the flag <code>is_array_like</code> to True in <code>param_settings</code>. Also, to automatically broadcast the passed scalar/array to the input shape, set <code>bc_to_input</code> to True, 0 (index axis), or 1 (column axis).</p> <p>In our example, the parameter <code>window</code> can broadcast per column, and both parameters <code>lower</code> and <code>upper</code> can broadcast per element:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>window</span><span class=p>,</span> <span class=n>lower</span><span class=p>,</span> <span class=n>upper</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>output</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float_</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]):</span>
<span class=gp>... </span>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>window</span><span class=p>[</span><span class=n>col</span><span class=p>],</span> <span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]):</span>
<span class=gp>... </span>            <span class=n>mean</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>price</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>window</span><span class=p>[</span><span class=n>col</span><span class=p>]:</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>])</span>
<span class=gp>... </span>            <span class=n>output</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>lower</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>mean</span> <span class=o>&lt;</span> <span class=n>upper</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>]</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>output</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;window&#39;</span><span class=p>,</span> <span class=s1>&#39;lower&#39;</span><span class=p>,</span> <span class=s1>&#39;upper&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>param_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>window</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>is_array_like</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>bc_to_input</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>per_column</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>lower</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>is_array_like</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>bc_to_input</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>upper</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>is_array_like</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>bc_to_input</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>window</span><span class=o>=</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>])],</span>
<span class=gp>... </span>    <span class=n>lower</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>upper</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]),</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_window       2       3               4</span>
<span class=go>custom_lower  array_0 array_0 array_1 array_1</span>
<span class=go>custom_upper  array_0 array_0 array_1 array_1</span>
<span class=go>                    a       b       a       b</span>
<span class=go>2020-01-01        NaN     NaN     NaN     NaN</span>
<span class=go>2020-01-02        NaN     NaN     NaN     NaN</span>
<span class=go>2020-01-03        1.0     NaN     NaN     NaN</span>
<span class=go>2020-01-04        1.0     0.0     1.0     NaN</span>
<span class=go>2020-01-05        0.0     1.0     0.0     1.0</span>
</code></pre></div> <p>Broadcasting a huge number of parameters to the input shape can consume lots of memory, especially when the array materializes. Luckily, vectorbt implements flexible broadcasting, which preserves the original dimensions of the parameter. This requires two changes: setting <code>keep_raw</code> to True in <code>broadcast_kwargs</code> and passing <code>flex_2d</code> to the apply function.</p> <p>There are two configs in <a href=/api/indicators/configs/ title=vectorbt.indicators.configs>vectorbt.indicators.configs</a> exactly for this purpose: one for column-wise broadcasting and one for element-wise broadcasting:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.base.reshape_fns</span> <span class=kn>import</span> <span class=n>flex_select_auto_nb</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.indicators.configs</span> <span class=kn>import</span> <span class=n>flex_col_param_config</span><span class=p>,</span> <span class=n>flex_elem_param_config</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>window</span><span class=p>,</span> <span class=n>lower</span><span class=p>,</span> <span class=n>upper</span><span class=p>,</span> <span class=n>flex_2d</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>output</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float_</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]):</span>
<span class=gp>... </span>        <span class=n>_window</span> <span class=o>=</span> <span class=n>flex_select_auto_nb</span><span class=p>(</span><span class=n>window</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>flex_2d</span><span class=p>)</span>
<span class=gp>... </span>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>_window</span><span class=p>,</span> <span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]):</span>
<span class=gp>... </span>            <span class=n>_lower</span> <span class=o>=</span> <span class=n>flex_select_auto_nb</span><span class=p>(</span><span class=n>lower</span><span class=p>,</span> <span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>flex_2d</span><span class=p>)</span>
<span class=gp>... </span>            <span class=n>_upper</span> <span class=o>=</span> <span class=n>flex_select_auto_nb</span><span class=p>(</span><span class=n>upper</span><span class=p>,</span> <span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>flex_2d</span><span class=p>)</span>
<span class=gp>... </span>            <span class=n>mean</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>price</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>_window</span><span class=p>:</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>])</span>
<span class=gp>... </span>            <span class=n>output</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>_lower</span> <span class=o>&lt;</span> <span class=n>mean</span> <span class=o>&lt;</span> <span class=n>_upper</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>output</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;window&#39;</span><span class=p>,</span> <span class=s1>&#39;lower&#39;</span><span class=p>,</span> <span class=s1>&#39;upper&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>param_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>window</span><span class=o>=</span><span class=n>flex_col_param_config</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>lower</span><span class=o>=</span><span class=n>flex_elem_param_config</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>upper</span><span class=o>=</span><span class=n>flex_elem_param_config</span>
<span class=gp>... </span>    <span class=p>),</span>
<span class=gp>... </span>    <span class=n>pass_flex_2d</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span><span class=p>)</span>
</code></pre></div> <p>Both bound parameters can now be passed as a scalar (value per whole input), a 1-dimensional array (value per row or column, depending upon whether input is a Series or a DataFrame), a 2-dimensional array (value per element), or a list of any of those. This allows for the highest parameter flexibility at the lowest memory cost.</p> <p>For example, let's build a grid of two parameter combinations, each being one window size per column and both bounds per element:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>window</span><span class=o>=</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>])],</span>
<span class=gp>... </span>    <span class=n>lower</span><span class=o>=</span><span class=n>price</span><span class=o>.</span><span class=n>values</span> <span class=o>-</span> <span class=mi>3</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upper</span><span class=o>=</span><span class=n>price</span><span class=o>.</span><span class=n>values</span> <span class=o>+</span> <span class=mi>3</span><span class=p>,</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_window       2       3               4</span>
<span class=go>custom_lower  array_0 array_0 array_1 array_1</span>
<span class=go>custom_upper  array_0 array_0 array_1 array_1</span>
<span class=go>                    a       b       a       b</span>
<span class=go>2020-01-01        NaN     NaN     NaN     NaN</span>
<span class=go>2020-01-02        NaN     NaN     NaN     NaN</span>
<span class=go>2020-01-03        1.0     NaN     NaN     NaN</span>
<span class=go>2020-01-04        1.0     1.0     1.0     NaN</span>
<span class=go>2020-01-05        1.0     1.0     1.0     1.0</span>
</code></pre></div> <p>Indicators can also be parameterless. See <a href=/api/indicators/basic/#vectorbt.indicators.basic.OBV title=vectorbt.indicators.basic.OBV>OBV</a>.</p> <h2 id=inputs>Inputs<a class=headerlink href=#inputs title="Permanent link">&para;</a></h2> <p><a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> supports passing none, one, or multiple inputs. If multiple inputs are passed, it tries to broadcast them into a single shape.</p> <p>Remember that in vectorbt each column means a separate backtest instance. That's why in order to use multiple pieces of information, such as open, high, low, close, and volume, we need to provide them as separate pandas objects rather than a single DataFrame.</p> <p>Let's create a parameterless indicator that measures the position of the close price within each bar:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>high</span><span class=p>,</span> <span class=n>low</span><span class=p>,</span> <span class=n>close</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=p>(</span><span class=n>close</span> <span class=o>-</span> <span class=n>low</span><span class=p>)</span> <span class=o>/</span> <span class=p>(</span><span class=n>high</span> <span class=o>-</span> <span class=n>low</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;high&#39;</span><span class=p>,</span> <span class=s1>&#39;low&#39;</span><span class=p>,</span> <span class=s1>&#39;close&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>price</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=n>price</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>              a    b</span>
<span class=go>2020-01-01  0.5  0.5</span>
<span class=go>2020-01-02  0.5  0.5</span>
<span class=go>2020-01-03  0.5  0.5</span>
<span class=go>2020-01-04  0.5  0.5</span>
<span class=go>2020-01-05  0.5  0.5</span>
</code></pre></div> <p>To demonstrate broadcasting, let's pass high as a DataFrame, low as a Series, and close as a scalar:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>)))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sr</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=mi>5</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>sr</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>          0         1</span>
<span class=go>0  0.960680  0.666820</span>
<span class=go>1  0.400646  0.528456</span>
<span class=go>2  0.093467  0.134777</span>
<span class=go>3  0.037210  0.102411</span>
<span class=go>4  0.529012  0.652602</span>
</code></pre></div> <p>By default, if a Series was passed, it's automatically expanded into a 2-dimensional array. To keep it as 1-dimensional, set <code>to_2d</code> to False.</p> <p>Similar to parameters, we can also define defaults for inputs. In addition to using scalars and arrays as default values, we can reference other inputs:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>ts1</span><span class=p>,</span> <span class=n>ts2</span><span class=p>,</span> <span class=n>ts3</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>ts1</span> <span class=o>+</span> <span class=n>ts2</span> <span class=o>+</span> <span class=n>ts3</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;ts1&#39;</span><span class=p>,</span> <span class=s1>&#39;ts2&#39;</span><span class=p>,</span> <span class=s1>&#39;ts3&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>,</span> <span class=n>ts2</span><span class=o>=</span><span class=s1>&#39;ts1&#39;</span><span class=p>,</span> <span class=n>ts3</span><span class=o>=</span><span class=s1>&#39;ts1&#39;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>               a     b</span>
<span class=go>2020-01-01   3.0  15.0</span>
<span class=go>2020-01-02   6.0  12.0</span>
<span class=go>2020-01-03   9.0   9.0</span>
<span class=go>2020-01-04  12.0   6.0</span>
<span class=go>2020-01-05  15.0   3.0</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>ts2</span><span class=o>=</span><span class=n>price</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>               a     b</span>
<span class=go>2020-01-01   4.0  20.0</span>
<span class=go>2020-01-02   8.0  16.0</span>
<span class=go>2020-01-03  12.0  12.0</span>
<span class=go>2020-01-04  16.0   8.0</span>
<span class=go>2020-01-05  20.0   4.0</span>
</code></pre></div> <p>What if an indicator doesn't take any input arrays? In that case, we can force the user to at least provide the input shape. Let's define a generator that emulates random returns and generates synthetic price:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>input_shape</span><span class=p>,</span> <span class=n>start</span><span class=p>,</span> <span class=n>mu</span><span class=p>,</span> <span class=n>sigma</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>rand_returns</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>normal</span><span class=p>(</span><span class=n>mu</span><span class=p>,</span> <span class=n>sigma</span><span class=p>,</span> <span class=n>input_shape</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>start</span> <span class=o>*</span> <span class=n>vbt</span><span class=o>.</span><span class=n>nb</span><span class=o>.</span><span class=n>nancumprod_nb</span><span class=p>(</span><span class=n>rand_returns</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;start&#39;</span><span class=p>,</span> <span class=s1>&#39;mu&#39;</span><span class=p>,</span> <span class=s1>&#39;sigma&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>require_input_shape</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>seed</span><span class=o>=</span><span class=mi>42</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.01</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_start                     100</span>
<span class=go>custom_mu                          0</span>
<span class=go>custom_sigma        0.01        0.01</span>
<span class=go>0             100.496714   99.861736</span>
<span class=go>1             101.147620  101.382660</span>
<span class=go>2             100.910779  101.145285</span>
<span class=go>3             102.504375  101.921510</span>
<span class=go>4             102.023143  102.474495</span>
</code></pre></div> <p>We can also supply pandas meta such as <code>input_index</code> and <code>input_columns</code> to the run method:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.01</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>input_index</span><span class=o>=</span><span class=n>price</span><span class=o>.</span><span class=n>index</span><span class=p>,</span> <span class=n>input_columns</span><span class=o>=</span><span class=n>price</span><span class=o>.</span><span class=n>columns</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_start                     100</span>
<span class=go>custom_mu                          0</span>
<span class=go>custom_sigma        0.01        0.01</span>
<span class=go>                       a           b</span>
<span class=go>2020-01-01    100.496714   99.861736</span>
<span class=go>2020-01-02    101.147620  101.382660</span>
<span class=go>2020-01-03    100.910779  101.145285</span>
<span class=go>2020-01-04    102.504375  101.921510</span>
<span class=go>2020-01-05    102.023143  102.474495</span>
</code></pre></div> <p>One can even build input-less indicator that decides on the output shape dynamically:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.base.combine_fns</span> <span class=kn>import</span> <span class=n>apply_and_concat_one</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>apply_func</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>ps</span><span class=p>,</span> <span class=n>input_shape</span><span class=p>):</span>
<span class=gp>... </span>     <span class=n>out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=n>input_shape</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<span class=gp>... </span>     <span class=n>out</span><span class=p>[:</span><span class=n>ps</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span> <span class=o>=</span> <span class=mi>1</span>
<span class=gp>... </span>     <span class=k>return</span> <span class=n>out</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>custom_func</span><span class=p>(</span><span class=n>ps</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>input_shape</span> <span class=o>=</span> <span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>max</span><span class=p>(</span><span class=n>ps</span><span class=p>),)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>apply_and_concat_one</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>ps</span><span class=p>),</span> <span class=n>apply_func</span><span class=p>,</span> <span class=n>ps</span><span class=p>,</span> <span class=n>input_shape</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;p&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_custom_func</span><span class=p>(</span><span class=n>custom_func</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>])</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_p  1  2  3  4  5</span>
<span class=go>0         1  1  1  1  1</span>
<span class=go>1         0  1  1  1  1</span>
<span class=go>2         0  0  1  1  1</span>
<span class=go>3         0  0  0  1  1</span>
<span class=go>4         0  0  0  0  1</span>
</code></pre></div> <h2 id=outputs>Outputs<a class=headerlink href=#outputs title="Permanent link">&para;</a></h2> <p>There are two types of outputs: regular and in-place outputs:</p> <ul> <li>Regular outputs are one or more arrays returned by the function. Each should have an exact same shape and match the number of columns in the input multiplied by the number of parameter values.</li> <li>In-place outputs are not returned but modified in-place. They broadcast together with inputs and are passed to the calculation function as a list, one per parameter.</li> </ul> <p>Two regular outputs:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>price</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=n>price</span> <span class=o>+</span> <span class=mi>1</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;out1&#39;</span><span class=p>,</span> <span class=s1>&#39;out2&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pd</span><span class=o>.</span><span class=n>testing</span><span class=o>.</span><span class=n>assert_frame_equal</span><span class=p>(</span><span class=n>myind</span><span class=o>.</span><span class=n>out1</span><span class=p>,</span> <span class=n>myind</span><span class=o>.</span><span class=n>price</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pd</span><span class=o>.</span><span class=n>testing</span><span class=o>.</span><span class=n>assert_frame_equal</span><span class=p>(</span><span class=n>myind</span><span class=o>.</span><span class=n>out2</span><span class=p>,</span> <span class=n>myind</span><span class=o>.</span><span class=n>price</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</code></pre></div> <p>One regular output and one in-place output:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>in_out2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>in_out2</span><span class=p>[:]</span> <span class=o>=</span> <span class=n>price</span> <span class=o>+</span> <span class=mi>1</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>price</span> <span class=o>-</span> <span class=mi>1</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;out1&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>in_output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;in_out2&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pd</span><span class=o>.</span><span class=n>testing</span><span class=o>.</span><span class=n>assert_frame_equal</span><span class=p>(</span><span class=n>myind</span><span class=o>.</span><span class=n>out1</span><span class=p>,</span> <span class=n>myind</span><span class=o>.</span><span class=n>price</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pd</span><span class=o>.</span><span class=n>testing</span><span class=o>.</span><span class=n>assert_frame_equal</span><span class=p>(</span><span class=n>myind</span><span class=o>.</span><span class=n>in_out2</span><span class=p>,</span> <span class=n>myind</span><span class=o>.</span><span class=n>price</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</code></pre></div> <p>Two in-place outputs:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>in_out1</span><span class=p>,</span> <span class=n>in_out2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>in_out1</span><span class=p>[:]</span> <span class=o>=</span> <span class=n>price</span> <span class=o>-</span> <span class=mi>1</span>
<span class=gp>... </span>    <span class=n>in_out2</span><span class=p>[:]</span> <span class=o>=</span> <span class=n>price</span> <span class=o>+</span> <span class=mi>1</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>in_output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;in_out1&#39;</span><span class=p>,</span> <span class=s1>&#39;in_out2&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pd</span><span class=o>.</span><span class=n>testing</span><span class=o>.</span><span class=n>assert_frame_equal</span><span class=p>(</span><span class=n>myind</span><span class=o>.</span><span class=n>in_out1</span><span class=p>,</span> <span class=n>myind</span><span class=o>.</span><span class=n>price</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pd</span><span class=o>.</span><span class=n>testing</span><span class=o>.</span><span class=n>assert_frame_equal</span><span class=p>(</span><span class=n>myind</span><span class=o>.</span><span class=n>in_out2</span><span class=p>,</span> <span class=n>myind</span><span class=o>.</span><span class=n>price</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</code></pre></div> <p>By default, in-place outputs are created as empty arrays with uninitialized values. This allows creation of optional outputs that, if not written, do not occupy much memory. Since not all outputs are meant to be of data type <code>float</code>, we can pass <code>dtype</code> in the <code>in_output_settings</code>.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>in_out</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>in_out</span><span class=p>[:]</span> <span class=o>=</span> <span class=n>price</span> <span class=o>&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>price</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>in_output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;in_out&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>in_output_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>in_out</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dtype</span><span class=o>=</span><span class=nb>bool</span><span class=p>))</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span><span class=o>.</span><span class=n>in_out</span>
<span class=go>                a      b</span>
<span class=go>2020-01-01  False   True</span>
<span class=go>2020-01-02  False   True</span>
<span class=go>2020-01-03  False  False</span>
<span class=go>2020-01-04   True  False</span>
<span class=go>2020-01-05   True  False</span>
</code></pre></div> <p>Another advantage of in-place outputs is that we can provide their initial state:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>in_out1</span><span class=p>,</span> <span class=n>in_out2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>in_out1</span><span class=p>[:]</span> <span class=o>=</span> <span class=n>in_out1</span> <span class=o>+</span> <span class=n>price</span>
<span class=gp>... </span>    <span class=n>in_out2</span><span class=p>[:]</span> <span class=o>=</span> <span class=n>in_out2</span> <span class=o>+</span> <span class=n>price</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>in_output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;in_out1&#39;</span><span class=p>,</span> <span class=s1>&#39;in_out2&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>in_out1</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>in_out2</span><span class=o>=</span><span class=s1>&#39;price&#39;</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span><span class=o>.</span><span class=n>in_out1</span>
<span class=go>              a    b</span>
<span class=go>2020-01-01  101  105</span>
<span class=go>2020-01-02  102  104</span>
<span class=go>2020-01-03  103  103</span>
<span class=go>2020-01-04  104  102</span>
<span class=go>2020-01-05  105  101</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span><span class=o>.</span><span class=n>in_out2</span>
<span class=go>               a     b</span>
<span class=go>2020-01-01   2.0  10.0</span>
<span class=go>2020-01-02   4.0   8.0</span>
<span class=go>2020-01-03   6.0   6.0</span>
<span class=go>2020-01-04   8.0   4.0</span>
<span class=go>2020-01-05  10.0   2.0</span>
</code></pre></div> <h2 id=without-numba>Without Numba<a class=headerlink href=#without-numba title="Permanent link">&para;</a></h2> <p>It's also possible to supply a function that is not Numba-compiled. This is handy when working with third-party libraries (see the implementation of <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_talib title=vectorbt.indicators.factory.IndicatorFactory.from_talib>IndicatorFactory.from_talib()</a>). Additionally, we can set <code>keep_pd</code> to True to pass all inputs as pandas objects instead of raw NumPy arrays.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Already broadcasted pandas meta will be provided; that is, each input array will have the same index and columns.</p> </div> <p>Let's demonstrate this by wrapping a basic composed <a href=https://github.com/twopirllc/pandas-ta>pandas_ta</a> strategy:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>pandas_ta</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>apply_func</span><span class=p>(</span><span class=nb>open</span><span class=p>,</span> <span class=n>high</span><span class=p>,</span> <span class=n>low</span><span class=p>,</span> <span class=n>close</span><span class=p>,</span> <span class=n>volume</span><span class=p>,</span> <span class=n>ema_len</span><span class=p>,</span> <span class=n>linreg_len</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=nb>dict</span><span class=p>(</span><span class=nb>open</span><span class=o>=</span><span class=nb>open</span><span class=p>,</span> <span class=n>high</span><span class=o>=</span><span class=n>high</span><span class=p>,</span> <span class=n>low</span><span class=o>=</span><span class=n>low</span><span class=p>,</span> <span class=n>close</span><span class=o>=</span><span class=n>close</span><span class=p>,</span> <span class=n>volume</span><span class=o>=</span><span class=n>volume</span><span class=p>))</span>
<span class=gp>... </span>    <span class=n>df</span><span class=o>.</span><span class=n>ta</span><span class=o>.</span><span class=n>strategy</span><span class=p>(</span><span class=n>pandas_ta</span><span class=o>.</span><span class=n>Strategy</span><span class=p>(</span><span class=s2>&quot;MyStrategy&quot;</span><span class=p>,</span> <span class=p>[</span>
<span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;ema&#39;</span><span class=p>,</span> <span class=n>length</span><span class=o>=</span><span class=n>ema_len</span><span class=p>),</span>
<span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;linreg&#39;</span><span class=p>,</span> <span class=n>close</span><span class=o>=</span><span class=s1>&#39;EMA_&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>ema_len</span><span class=p>),</span> <span class=n>length</span><span class=o>=</span><span class=n>linreg_len</span><span class=p>)</span>
<span class=gp>... </span>    <span class=p>]))</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=nb>tuple</span><span class=p>([</span><span class=n>df</span><span class=o>.</span><span class=n>iloc</span><span class=p>[:,</span> <span class=n>i</span><span class=p>]</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>columns</span><span class=p>))])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;open&#39;</span><span class=p>,</span> <span class=s1>&#39;high&#39;</span><span class=p>,</span> <span class=s1>&#39;low&#39;</span><span class=p>,</span> <span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=s1>&#39;volume&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;ema_len&#39;</span><span class=p>,</span> <span class=s1>&#39;linreg_len&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;ema&#39;</span><span class=p>,</span> <span class=s1>&#39;ema_linreg&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>keep_pd</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>to_2d</span><span class=o>=</span><span class=kc>False</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_ind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;High&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Low&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Volume&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>ema_len</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>linreg_len</span><span class=o>=</span><span class=p>[</span><span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_ind</span><span class=o>.</span><span class=n>ema_linreg</span>
<span class=go>custom_ema_len                                            5</span>
<span class=go>custom_linreg_len            8             9             10</span>
<span class=go>date</span>
<span class=go>2021-02-02                  NaN           NaN           NaN</span>
<span class=go>2021-02-03                  NaN           NaN           NaN</span>
<span class=go>2021-02-04                  NaN           NaN           NaN</span>
<span class=go>2021-02-05                  NaN           NaN           NaN</span>
<span class=go>2021-02-06                  NaN           NaN           NaN</span>
<span class=gp>... </span>                        <span class=o>...</span>           <span class=o>...</span>           <span class=o>...</span>
<span class=go>2021-02-25         52309.302811  52602.005326  52899.576568</span>
<span class=go>2021-02-26         50797.264793  51224.188381  51590.825690</span>
<span class=go>2021-02-28         49217.904905  49589.546052  50066.206828</span>
<span class=go>2021-03-01         48316.305403  48553.540713  48911.701664</span>
<span class=go>2021-03-02         47984.395969  47956.885953  48150.929668</span>
</code></pre></div> <p>In the example above, only one Series per open, high, low, close, and volume can be passed. To enable the indicator to process two-dimensional data, set <code>to_2d</code> to True and create a loop over each column in the <code>apply_func</code>.</p> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>Writing a native Numba-compiled code may provide a performance that is magnitudes higher than that offered by libraries that work on pandas.</p> </div> <h2 id=raw-outputs-and-caching>Raw outputs and caching<a class=headerlink href=#raw-outputs-and-caching title="Permanent link">&para;</a></h2> <p><a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> re-uses calculation artifacts whenever possible. Since it was originally designed for hyperparameter optimization and there are times when parameter values gets repeated, prevention of processing the same parameter over and over again is inevitable for good performance. For instance, when the <code>run_combs</code> method is being used and <code>run_unique</code> is set to True, it first calculates the raw outputs of all unique parameter combinations and then uses them to build outputs for the whole parameter grid.</p> <p>Let's first take a look at a typical raw output by setting <code>return_raw</code> to True:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>raw</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[</span><span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>],</span> <span class=n>return_raw</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>raw</span>
<span class=go>([array([[       nan,        nan,        nan,        nan],</span>
<span class=go>         [1.5       , 4.5       , 1.66666667, 4.33333333],</span>
<span class=go>         [2.5       , 3.5       , 2.55555556, 3.44444444],</span>
<span class=go>         [3.5       , 2.5       , 3.51851852, 2.48148148],</span>
<span class=go>         [4.5       , 1.5       , 4.50617284, 1.49382716]])],</span>
<span class=go> [(2, False), (2, True)],</span>
<span class=go> 2,</span>
<span class=go> [])</span>
</code></pre></div> <p>It consists of a list of the returned output arrays, a list of the zipped parameter combinations, the number of input columns, and other objects returned along with output arrays but not listed in <code>output_names</code>. The next time we decide to run the indicator on a subset of the parameters above, we can simply pass this tuple as the <code>use_raw</code> argument. This won't call the calculation function and will throw an error if some of the requested parameter combinations cannot be found in <code>raw</code>.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>MA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=n>use_raw</span><span class=o>=</span><span class=n>raw</span><span class=p>)</span><span class=o>.</span><span class=n>ma</span>
<span class=go>ma_window                    2</span>
<span class=go>ma_ewm                    True</span>
<span class=go>                   a         b</span>
<span class=go>2020-01-01       NaN       NaN</span>
<span class=go>2020-01-02  1.666667  4.333333</span>
<span class=go>2020-01-03  2.555556  3.444444</span>
<span class=go>2020-01-04  3.518519  2.481481</span>
<span class=go>2020-01-05  4.506173  1.493827</span>
</code></pre></div> <p>Here is how the performance compares when repeatedly running the same parameter combination with and without <code>run_unique</code>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>1000</span><span class=p>,))</span>

<span class=gp>&gt;&gt;&gt; </span><span class=o>%</span><span class=n>timeit</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=mi>1000</span><span class=p>,</span> <span class=mi>2</span><span class=p>),</span> <span class=n>run_unique</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=go>73.4 ms  4.76 ms per loop (mean  std. dev. of 7 runs, 1 loop each)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=o>%</span><span class=n>timeit</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=mi>1000</span><span class=p>,</span> <span class=mi>2</span><span class=p>),</span> <span class=n>run_unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=go>8.99 ms  114 s per loop (mean  std. dev. of 7 runs, 100 loops each)</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>run_unique</code> is disabled by default.</p> </div> <p>Enable <code>run_unique</code> if input arrays have few columns and there are tons of repeated parameter combinations. Disable <code>run_unique</code> if input arrays are very wide, if two identical parameter combinations can lead to different results, or when requesting raw output, cache, or additional outputs outside of <code>output_names</code>.</p> <p>Another performance enhancement can be introduced by caching, which has to be implemented by the user. The class method <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_apply_func title=vectorbt.indicators.factory.IndicatorFactory.from_apply_func>IndicatorFactory.from_apply_func()</a> has an argument <code>cache_func</code>, which is called prior to the main calculation.</p> <p>Consider the following scenario: we want to compute the relative distance between two expensive rolling windows. We have already decided on the value for the first window, and want to test thousands of values for the second window. Without caching, and even with <code>run_unique</code> enabled, the first rolling window will be re-calculated over and over again and waste our resources:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>roll_mean_expensive_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>w</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>):</span>
<span class=gp>... </span>        <span class=n>out</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>nb</span><span class=o>.</span><span class=n>rolling_mean_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>w</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>out</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>w1</span><span class=p>,</span> <span class=n>w2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>roll_mean1</span> <span class=o>=</span> <span class=n>roll_mean_expensive_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>w1</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>roll_mean2</span> <span class=o>=</span> <span class=n>roll_mean_expensive_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>w2</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=p>(</span><span class=n>roll_mean2</span> <span class=o>-</span> <span class=n>roll_mean1</span><span class=p>)</span> <span class=o>/</span> <span class=n>roll_mean1</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;w1&#39;</span><span class=p>,</span> <span class=s1>&#39;w2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>],</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_w1                    2</span>
<span class=go>custom_w2                    3</span>
<span class=go>                   a         b</span>
<span class=go>2020-01-01       NaN       NaN</span>
<span class=go>2020-01-02       NaN       NaN</span>
<span class=go>2020-01-03 -0.200000  0.142857</span>
<span class=go>2020-01-04 -0.142857  0.200000</span>
<span class=go>2020-01-05 -0.111111  0.333333</span>

<span class=gp>&gt;&gt;&gt; </span><span class=o>%</span><span class=n>timeit</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1000</span><span class=p>))</span>
<span class=go>264 ms  3.22 ms per loop (mean  std. dev. of 7 runs, 1 loop each)</span>
</code></pre></div> <p>To avoid this, let's cache all unique rolling windows:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>cache_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>ws1</span><span class=p>,</span> <span class=n>ws2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>cache_dict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>()</span>
<span class=gp>... </span>    <span class=n>ws</span> <span class=o>=</span> <span class=n>ws1</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
<span class=gp>... </span>    <span class=n>ws</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>ws2</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>ws</span><span class=p>)):</span>
<span class=gp>... </span>        <span class=n>h</span> <span class=o>=</span> <span class=nb>hash</span><span class=p>((</span><span class=n>ws</span><span class=p>[</span><span class=n>i</span><span class=p>]))</span>
<span class=gp>... </span>        <span class=k>if</span> <span class=n>h</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>cache_dict</span><span class=p>:</span>
<span class=gp>... </span>            <span class=n>cache_dict</span><span class=p>[</span><span class=n>h</span><span class=p>]</span> <span class=o>=</span> <span class=n>roll_mean_expensive_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>ws</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>cache_dict</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>w1</span><span class=p>,</span> <span class=n>w2</span><span class=p>,</span> <span class=n>cache_dict</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=p>(</span><span class=n>cache_dict</span><span class=p>[</span><span class=nb>hash</span><span class=p>(</span><span class=n>w2</span><span class=p>)]</span> <span class=o>-</span> <span class=n>cache_dict</span><span class=p>[</span><span class=nb>hash</span><span class=p>(</span><span class=n>w1</span><span class=p>)])</span> <span class=o>/</span> <span class=n>cache_dict</span><span class=p>[</span><span class=nb>hash</span><span class=p>(</span><span class=n>w1</span><span class=p>)]</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;w1&#39;</span><span class=p>,</span> <span class=s1>&#39;w2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;output&#39;</span><span class=p>],</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>,</span> <span class=n>cache_func</span><span class=o>=</span><span class=n>cache_func_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span><span class=o>.</span><span class=n>output</span>
<span class=go>custom_w1                    2</span>
<span class=go>custom_w2                    3</span>
<span class=go>                   a         b</span>
<span class=go>2020-01-01       NaN       NaN</span>
<span class=go>2020-01-02       NaN       NaN</span>
<span class=go>2020-01-03 -0.200000  0.142857</span>
<span class=go>2020-01-04 -0.142857  0.200000</span>
<span class=go>2020-01-05 -0.111111  0.333333</span>

<span class=gp>&gt;&gt;&gt; </span><span class=o>%</span><span class=n>timeit</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1000</span><span class=p>))</span>
<span class=go>145 ms  4.55 ms per loop (mean  std. dev. of 7 runs, 10 loops each)</span>
</code></pre></div> <p>We have cut down the processing time almost in half.</p> <p>Similar to raw outputs, we can force <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> to return the cache, so it can be used in other calculations or even indicators. The clear advantage of this approach is that we don't rely on some fixed set of parameter combinations any more, but on the values of each parameter, which gives us more granularity in managing performance.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>cache</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1000</span><span class=p>),</span> <span class=n>return_cache</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=o>%</span><span class=n>timeit</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1000</span><span class=p>),</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1000</span><span class=p>),</span> <span class=n>use_cache</span><span class=o>=</span><span class=n>cache</span><span class=p>)</span>
<span class=go>30.1 ms  2 ms per loop (mean  std. dev. of 7 runs, 10 loops each)</span>
</code></pre></div> <h2 id=custom-properties-and-methods>Custom properties and methods<a class=headerlink href=#custom-properties-and-methods title="Permanent link">&para;</a></h2> <p>Use <code>custom_output_props</code> argument when constructing an indicator to define lazy outputs - outputs that are processed only when explicitly called. They will become cached properties and, in contrast to regular outputs, they can have an arbitrary shape. For example, let's attach a property that will calculate the distance between the moving average and the price.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;window&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;ma&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>custom_output_props</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>distance</span><span class=o>=</span><span class=k>lambda</span> <span class=bp>self</span><span class=p>:</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>price</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>ma</span><span class=p>)</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>ma</span><span class=p>)</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>nb</span><span class=o>.</span><span class=n>rolling_mean_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span><span class=o>.</span><span class=n>distance</span>
<span class=go>custom_window                   2                   3</span>
<span class=go>                      a         b         a         b</span>
<span class=go>2020-01-01          NaN       NaN       NaN       NaN</span>
<span class=go>2020-01-02     0.333333 -0.111111       NaN       NaN</span>
<span class=go>2020-01-03     0.200000 -0.142857  0.500000 -0.250000</span>
<span class=go>2020-01-04     0.142857 -0.200000  0.333333 -0.333333</span>
<span class=go>2020-01-05     0.111111 -0.333333  0.250000 -0.500000</span>
</code></pre></div> <p>Another way of defining own properties and methods is subclassing:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>MyIndExtended</span><span class=p>(</span><span class=n>MyInd</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=nf>plot</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=gp>... </span>        <span class=n>self_col</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=n>column</span><span class=p>,</span> <span class=n>group_by</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>ma</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyIndExtended</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])[(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;a&#39;</span><span class=p>)]</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/MyInd_plot.svg></p> <h2 id=helper-properties-and-methods>Helper properties and methods<a class=headerlink href=#helper-properties-and-methods title="Permanent link">&para;</a></h2> <p>For all in <code>input_names</code>, <code>in_output_names</code>, <code>output_names</code>, and <code>custom_output_props</code>, <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> will create a bunch of comparison and combination methods, such as for generating signals. What kind of methods are created can be regulated using <code>dtype</code> in the <code>attr_settings</code> dictionary.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>namedtuple</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyEnum</span> <span class=o>=</span> <span class=n>namedtuple</span><span class=p>(</span><span class=s1>&#39;MyEnum&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;one&#39;</span><span class=p>,</span> <span class=s1>&#39;two&#39;</span><span class=p>])(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>out_float</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float_</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>out_bool</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>bool_</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>out_enum</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=n>price</span><span class=o>.</span><span class=n>shape</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>int_</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>out_float</span><span class=p>,</span> <span class=n>out_bool</span><span class=p>,</span> <span class=n>out_enum</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;out_float&#39;</span><span class=p>,</span> <span class=s1>&#39;out_bool&#39;</span><span class=p>,</span> <span class=s1>&#39;out_enum&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>attr_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>out_float</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float_</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>out_bool</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>bool_</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>out_enum</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dtype</span><span class=o>=</span><span class=n>MyEnum</span><span class=p>)</span>
<span class=gp>... </span><span class=p>))</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span><span class=n>apply_func_nb</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>dir</span><span class=p>(</span><span class=n>myind</span><span class=p>)</span>
<span class=go>[</span>
<span class=go>    ...</span>
<span class=go>    &#39;out_bool&#39;,</span>
<span class=go>    &#39;out_bool_and&#39;,</span>
<span class=go>    &#39;out_bool_or&#39;,</span>
<span class=go>    &#39;out_bool_stats&#39;,</span>
<span class=go>    &#39;out_bool_xor&#39;,</span>
<span class=go>    &#39;out_enum&#39;,</span>
<span class=go>    &#39;out_enum_readable&#39;,</span>
<span class=go>    &#39;out_enum_stats&#39;,</span>
<span class=go>    &#39;out_float&#39;,</span>
<span class=go>    &#39;out_float_above&#39;,</span>
<span class=go>    &#39;out_float_below&#39;,</span>
<span class=go>    &#39;out_float_equal&#39;,</span>
<span class=go>    &#39;out_float_stats&#39;,</span>
<span class=go>    ...</span>
<span class=go>    &#39;price&#39;,</span>
<span class=go>    &#39;price_above&#39;,</span>
<span class=go>    &#39;price_below&#39;,</span>
<span class=go>    &#39;price_equal&#39;,</span>
<span class=go>    &#39;price_stats&#39;,</span>
<span class=go>    ...</span>
<span class=go>]</span>
</code></pre></div> <p>Each of these methods and properties are created for sheer convenience: to easily combine boolean arrays using logical rules and to compare numeric arrays. All operations are done strictly using NumPy. Another advantage is utilization of vectorbt's own broadcasting, such that one can combine inputs and outputs with an arbitrary array-like object, given their shapes can broadcast together.</p> <p>We can also do comparison with multiple objects at once by passing them as a tuple/list:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span><span class=o>.</span><span class=n>price_above</span><span class=p>([</span><span class=mf>1.5</span><span class=p>,</span> <span class=mf>2.5</span><span class=p>])</span>
<span class=go>custom_price_above           1.5           2.5</span>
<span class=go>                        a      b      a      b</span>
<span class=go>2020-01-01          False   True  False   True</span>
<span class=go>2020-01-02           True   True  False   True</span>
<span class=go>2020-01-03           True   True   True   True</span>
<span class=go>2020-01-04           True   True   True  False</span>
<span class=go>2020-01-05           True  False   True  False</span>
</code></pre></div> <h2 id=indexing>Indexing<a class=headerlink href=#indexing title="Permanent link">&para;</a></h2> <p><a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> attaches pandas indexing to the indicator class thanks to <a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.ArrayWrapper title=vectorbt.base.array_wrapper.ArrayWrapper>ArrayWrapper</a>. Supported are <code>iloc</code>, <code>loc</code>, <code>*param_name*_loc</code>, <code>xs</code>, and <code>__getitem__</code>.</p> <p>This makes possible accessing rows and columns by labels, integer positions, and parameters.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>ma</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>ma</span><span class=p>[(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>)]</span>
<span class=go>&lt;vectorbt.indicators.basic.MA at 0x7fe4d10ddcc0&gt;</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>ma</span><span class=p>[(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>)]</span><span class=o>.</span><span class=n>ma</span>
<span class=go>2020-01-01    NaN</span>
<span class=go>2020-01-02    4.5</span>
<span class=go>2020-01-03    3.5</span>
<span class=go>2020-01-04    2.5</span>
<span class=go>2020-01-05    1.5</span>
<span class=go>Name: (2, b), dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>ma</span><span class=o>.</span><span class=n>window_loc</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=o>.</span><span class=n>ma</span>
<span class=go>              a    b</span>
<span class=go>2020-01-01  NaN  NaN</span>
<span class=go>2020-01-02  1.5  4.5</span>
<span class=go>2020-01-03  2.5  3.5</span>
<span class=go>2020-01-04  3.5  2.5</span>
<span class=go>2020-01-05  4.5  1.5</span>
</code></pre></div> <h2 id=ta-lib>TA-Lib<a class=headerlink href=#ta-lib title="Permanent link">&para;</a></h2> <p>Indicator factory also provides a class method <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_talib title=vectorbt.indicators.factory.IndicatorFactory.from_talib>IndicatorFactory.from_talib()</a> that can be used to wrap any function from TA-Lib. It automatically fills all the neccessary information, such as input, parameter and output names.</p> <h2 id=stats>Stats<a class=headerlink href=#stats title="Permanent link">&para;</a></h2> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>See <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.generic.stats_builder.StatsBuilderMixin.stats>StatsBuilderMixin.stats()</a>.</p> </div> <p>We can attach metrics to any new indicator class:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>price</span> <span class=o>**</span> <span class=mi>2</span><span class=p>,</span> <span class=n>price</span> <span class=o>**</span> <span class=mi>3</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;out1&#39;</span><span class=p>,</span> <span class=s1>&#39;out2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>metrics</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>sum_diff</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>            <span class=n>calc_func</span><span class=o>=</span><span class=k>lambda</span> <span class=bp>self</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>out2</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>out1</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
<span class=gp>... </span>        <span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=s1>&#39;a&#39;</span><span class=p>)</span>
<span class=go>sum_diff    170.0</span>
<span class=go>Name: a, dtype: float64</span>
</code></pre></div> <h2 id=plots>Plots<a class=headerlink href=#plots title="Permanent link">&para;</a></h2> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>See <a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots>PlotsBuilderMixin.plots()</a>.</p> </div> <p>Similarly to stats, we can attach subplots to any new indicator class:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>price</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>price</span> <span class=o>**</span> <span class=mi>2</span><span class=p>,</span> <span class=n>price</span> <span class=o>**</span> <span class=mi>3</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>plot_outputs</span><span class=p>(</span><span class=n>out1</span><span class=p>,</span> <span class=n>out2</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>fig</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>fig</span> <span class=o>=</span> <span class=n>out1</span><span class=p>[</span><span class=n>column</span><span class=p>]</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=s1>&#39;out1&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>fig</span><span class=o>=</span><span class=n>fig</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>fig</span> <span class=o>=</span> <span class=n>out2</span><span class=p>[</span><span class=n>column</span><span class=p>]</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=s1>&#39;out2&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>fig</span><span class=o>=</span><span class=n>fig</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;out1&#39;</span><span class=p>,</span> <span class=s1>&#39;out2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>subplots</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>plot_outputs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>            <span class=n>plot_func</span><span class=o>=</span><span class=n>plot_outputs</span><span class=p>,</span>
<span class=gp>... </span>            <span class=n>resolve_out1</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>            <span class=n>resolve_out2</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span>        <span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>myind</span><span class=o>.</span><span class=n>plots</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=s1>&#39;a&#39;</span><span class=p>)</span>
</code></pre></div> <p><img alt src=/assets/images/IndicatorFactory_plots.svg></p> <hr> <h2 id=vectorbt.indicators.factory.build_columns>build_columns <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L1272-L1338 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.build_columns title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>build_columns</span><span class=p>(</span>
    <span class=n>param_list</span><span class=p>,</span>
    <span class=n>input_columns</span><span class=p>,</span>
    <span class=n>level_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>hide_levels</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>param_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>per_column</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>ignore_default</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>For each parameter in <code>param_list</code>, create a new column level with parameter values and stack it on top of <code>input_columns</code>.</p> <p>Returns a list of parameter indexes and new columns.</p> <hr> <h2 id=vectorbt.indicators.factory.combine_objs>combine_objs <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2018-L2034 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.combine_objs title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>combine_objs</span><span class=p>(</span>
    <span class=n>obj</span><span class=p>,</span>
    <span class=n>other</span><span class=p>,</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
    <span class=n>level_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>keys</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>allow_multiple</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Combines/compares <code>obj</code> to <code>other</code>, for example, to generate signals.</p> <p>Both will broadcast together. Pass <code>other</code> as a tuple or a list to compare with multiple arguments. In this case, a new column level will be created with the name <code>level_name</code>.</p> <p>See <a href=/api/base/accessors/#vectorbt.base.accessors.BaseAccessor.combine title=vectorbt.base.accessors.BaseAccessor.combine>BaseAccessor.combine()</a>.</p> <hr> <h2 id=vectorbt.indicators.factory.params_to_list>params_to_list <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L1199-L1210 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.params_to_list title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>params_to_list</span><span class=p>(</span>
    <span class=n>params</span><span class=p>,</span>
    <span class=n>is_tuple</span><span class=p>,</span>
    <span class=n>is_array_like</span>
<span class=p>)</span>
</code></pre></div> <p>Cast parameters to a list.</p> <hr> <h2 id=vectorbt.indicators.factory.prepare_params>prepare_params <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L1213-L1269 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.prepare_params title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>prepare_params</span><span class=p>(</span>
    <span class=n>param_list</span><span class=p>,</span>
    <span class=n>param_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>input_shape</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>to_2d</span><span class=o>=</span><span class=kc>False</span>
<span class=p>)</span>
</code></pre></div> <p>Prepare parameters.</p> <hr> <h2 id=vectorbt.indicators.factory.run_pipeline>run_pipeline <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L1362-L2015 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.run_pipeline title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>run_pipeline</span><span class=p>(</span>
    <span class=n>num_ret_outputs</span><span class=p>,</span>
    <span class=n>custom_func</span><span class=p>,</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
    <span class=n>require_input_shape</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>input_shape</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>input_index</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>input_columns</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>input_list</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>in_output_list</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>in_output_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>broadcast_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>param_list</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>param_product</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>param_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>run_unique</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>silence_warnings</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>per_column</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>pass_col</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>keep_pd</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>to_2d</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>as_lists</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>pass_input_shape</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>pass_flex_2d</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>level_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>hide_levels</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>stacking_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>return_raw</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>use_raw</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>A pipeline for running an indicator, used by <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>num_ret_outputs</code></strong> :&ensp;<code>int</code></dt> <dd>The number of output arrays returned by <code>custom_func</code>.</dd> <dt><strong><code>custom_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>A custom calculation function.</p> <p>See <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a>.</p> </dd> <dt><strong><code>*args</code></strong></dt> <dd>Arguments passed to the <code>custom_func</code>.</dd> <dt><strong><code>require_input_shape</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to input shape is required.</p> <p>Will set <code>pass_input_shape</code> to True and raise an error if <code>input_shape</code> is None.</p> </dd> <dt><strong><code>input_shape</code></strong> :&ensp;<code>tuple</code></dt> <dd> <p>Shape to broadcast each input to.</p> <p>Can be passed to <code>custom_func</code>. See <code>pass_input_shape</code>.</p> </dd> <dt><strong><code>input_index</code></strong> :&ensp;<code>index_like</code></dt> <dd> <p>Sets index of each input.</p> <p>Can be used to label index if no inputs passed.</p> </dd> <dt><strong><code>input_columns</code></strong> :&ensp;<code>index_like</code></dt> <dd> <p>Sets columns of each input.</p> <p>Can be used to label columns if no inputs passed.</p> </dd> <dt><strong><code>input_list</code></strong> :&ensp;<code>list</code> of <code>array_like</code></dt> <dd>A list of input arrays.</dd> <dt><strong><code>in_output_list</code></strong> :&ensp;<code>list</code> of <code>array_like</code></dt> <dd> <p>A list of in-place output arrays.</p> <p>If an array should be generated, pass None.</p> </dd> <dt><strong><code>in_output_settings</code></strong> :&ensp;<code>dict</code> or <code>list</code> of <code>dict</code></dt> <dd> <p>Settings corresponding to each in-place output.</p> <p>Following keys are accepted:</p> <ul> <li><code>dtype</code>: Create this array using this data type and <code>np.empty</code>. Default is None.</li> </ul> </dd> <dt><strong><code>broadcast_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/base/reshape_fns/#vectorbt.base.reshape_fns.broadcast title=vectorbt.base.reshape_fns.broadcast>broadcast()</a> to broadcast inputs.</dd> <dt><strong><code>param_list</code></strong> :&ensp;<code>list</code> of <code>any</code></dt> <dd> <p>A list of parameters.</p> <p>Each element is either an array-like object or a single value of any type.</p> </dd> <dt><strong><code>param_product</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to build a Cartesian product out of all parameters.</dd> <dt><strong><code>param_settings</code></strong> :&ensp;<code>dict</code> or <code>list</code> of <code>dict</code></dt> <dd> <p>Settings corresponding to each parameter.</p> <p>Following keys are accepted:</p> <ul> <li><code>dtype</code>: If data type is an enumerated type or other mapping, and a string as parameter value was passed, will convert it first.</li> <li><code>is_tuple</code>: If tuple was passed, it will be considered as a single value. To treat it as multiple values, pack it into a list.</li> <li><code>is_array_like</code>: If array-like object was passed, it will be considered as a single value. To treat it as multiple values, pack it into a list.</li> <li><code>bc_to_input</code>: Whether to broadcast parameter to input size. You can also broadcast parameter to an axis by passing an integer.</li> <li><code>broadcast_kwargs</code>: Keyword arguments passed to <a href=/api/base/reshape_fns/#vectorbt.base.reshape_fns.broadcast title=vectorbt.base.reshape_fns.broadcast>broadcast()</a>.</li> <li><code>per_column</code>: Whether each parameter value can be split per column such that it can be better reflected in a multi-index. Does not affect broadcasting.</li> </ul> </dd> <dt><strong><code>run_unique</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to run only on unique parameter combinations.</p> <p>Disable if two identical parameter combinations can lead to different results (e.g., due to randomness) or if inputs are large and <code>custom_func</code> is fast.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Cache, raw output, and output objects outside of <code>num_ret_outputs</code> will be returned for unique parameter combinations only.</p> </div> </dd> <dt><strong><code>silence_warnings</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to hide warnings such as coming from <code>run_unique</code>.</dd> <dt><strong><code>per_column</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to split the DataFrame into Series, one per column, and run <code>custom_func</code> on each Series.</p> <p>Each list of parameter values will broadcast to the number of columns and each parameter value will be applied per Series rather than per DataFrame. Input shape must be known beforehand.</p> </dd> <dt><strong><code>pass_col</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to pass column index as keyword argument if <code>per_column</code> is set to True.</dd> <dt><strong><code>keep_pd</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to keep inputs as pandas objects, otherwise convert to NumPy arrays.</dd> <dt><strong><code>to_2d</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to reshape inputs to 2-dim arrays, otherwise keep as-is.</dd> <dt><strong><code>as_lists</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to pass inputs and parameters to <code>custom_func</code> as lists.</p> <p>If <code>custom_func</code> is Numba-compiled, passes tuples.</p> </dd> <dt><strong><code>pass_input_shape</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to pass <code>input_shape</code> to <code>custom_func</code> as keyword argument.</dd> <dt><strong><code>pass_flex_2d</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to pass <code>flex_2d</code> to <code>custom_func</code> as keyword argument.</dd> <dt><strong><code>level_names</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd> <p>A list of column level names corresponding to each parameter.</p> <p>Should have the same length as <code>param_list</code>.</p> </dd> <dt><strong><code>hide_levels</code></strong> :&ensp;<code>list</code> of <code>int</code></dt> <dd>A list of indices of parameter levels to hide.</dd> <dt><strong><code>stacking_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/base/index_fns/#vectorbt.base.index_fns.repeat_index title=vectorbt.base.index_fns.repeat_index>repeat_index()</a>, <a href=/api/base/index_fns/#vectorbt.base.index_fns.tile_index title=vectorbt.base.index_fns.tile_index>tile_index()</a>, and <a href=/api/base/index_fns/#vectorbt.base.index_fns.stack_indexes title=vectorbt.base.index_fns.stack_indexes>stack_indexes()</a> when stacking parameter and input column levels.</dd> <dt><strong><code>return_raw</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to return raw output without post-processing and hashed parameter tuples.</dd> <dt><strong><code>use_raw</code></strong> :&ensp;<code>bool</code></dt> <dd>Takes the raw results and uses them instead of running <code>custom_func</code>.</dd> <dt><strong><code>wrapper_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.ArrayWrapper title=vectorbt.base.array_wrapper.ArrayWrapper>ArrayWrapper</a>.</dd> <dt><strong><code>seed</code></strong> :&ensp;<code>int</code></dt> <dd>Set seed to make output deterministic.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd> <p>Keyword arguments passed to the <code>custom_func</code>.</p> <p>Some common arguments include <code>return_cache</code> to return cache and <code>use_cache</code> to use cache. Those are only applicable to <code>custom_func</code> that supports it (<code>custom_func</code> created using <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_apply_func title=vectorbt.indicators.factory.IndicatorFactory.from_apply_func>IndicatorFactory.from_apply_func()</a> are supported by default).</p> </dd> </dl> <p><strong>Returns</strong></p> <p>Array wrapper, list of inputs (<code>np.ndarray</code>), input mapper (<code>np.ndarray</code>), list of outputs (<code>np.ndarray</code>), list of parameter arrays (<code>np.ndarray</code>), list of parameter mappers (<code>np.ndarray</code>), list of outputs that are outside of <code>num_ret_outputs</code>. <strong>Explanation</strong></p> <p>Here is a subset of tasks that the function <a href=/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline title=vectorbt.indicators.factory.run_pipeline>run_pipeline()</a> does:</p> <ul> <li>Takes one or multiple array objects in <code>input_list</code> and broadcasts them.</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>sr</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=n>index</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>,</span> <span class=s1>&#39;y&#39;</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>([[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>]],</span> <span class=n>index</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>,</span> <span class=s1>&#39;y&#39;</span><span class=p>],</span> <span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>input_list</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>base</span><span class=o>.</span><span class=n>reshape_fns</span><span class=o>.</span><span class=n>broadcast</span><span class=p>(</span><span class=n>sr</span><span class=p>,</span> <span class=n>df</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>input_list</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<span class=go>   a  b</span>
<span class=go>x  1  1</span>
<span class=go>y  2  2</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>input_list</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<span class=go>   a  b</span>
<span class=go>x  3  4</span>
<span class=go>y  5  6</span>
</code></pre></div> <ul> <li>Takes one or multiple parameters in <code>param_list</code>, converts them to NumPy arrays and broadcasts them.</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>p3</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=p>[</span><span class=kc>False</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>param_list</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>base</span><span class=o>.</span><span class=n>reshape_fns</span><span class=o>.</span><span class=n>broadcast</span><span class=p>(</span><span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>p3</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>param_list</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<span class=go>array([1, 1, 1])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>param_list</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<span class=go>array([2, 3, 4])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>param_list</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
<span class=go>array([False, False, False])</span>
</code></pre></div> <ul> <li>Performs calculation using <code>custom_func</code> to build output arrays (<code>output_list</code>) and other objects (<code>other_list</code>, optionally).</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>custom_func</span><span class=p>(</span><span class=n>ts1</span><span class=p>,</span> <span class=n>ts2</span><span class=p>,</span> <span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>p3</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>hstack</span><span class=p>((</span>
<span class=gp>... </span>        <span class=n>ts1</span> <span class=o>+</span> <span class=n>ts2</span> <span class=o>+</span> <span class=n>p1</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>p2</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span>
<span class=gp>... </span>        <span class=n>ts1</span> <span class=o>+</span> <span class=n>ts2</span> <span class=o>+</span> <span class=n>p1</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>p2</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
<span class=gp>... </span>        <span class=n>ts1</span> <span class=o>+</span> <span class=n>ts2</span> <span class=o>+</span> <span class=n>p1</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>p2</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span>
<span class=gp>... </span>    <span class=p>))</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>output</span> <span class=o>=</span> <span class=n>custom_func</span><span class=p>(</span><span class=o>*</span><span class=n>input_list</span><span class=p>,</span> <span class=o>*</span><span class=n>param_list</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>output</span>
<span class=go>array([[ 6,  7,  7,  8,  8,  9],</span>
<span class=go>       [ 9, 10, 10, 11, 11, 12]])</span>
</code></pre></div> <ul> <li>Creates new column hierarchy based on parameters and level names.</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>p1_columns</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Index</span><span class=p>(</span><span class=n>param_list</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;p1&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>p2_columns</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Index</span><span class=p>(</span><span class=n>param_list</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;p2&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>p3_columns</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Index</span><span class=p>(</span><span class=n>param_list</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;p3&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>p_columns</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>base</span><span class=o>.</span><span class=n>index_fns</span><span class=o>.</span><span class=n>stack_indexes</span><span class=p>([</span><span class=n>p1_columns</span><span class=p>,</span> <span class=n>p2_columns</span><span class=p>,</span> <span class=n>p3_columns</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>new_columns</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>base</span><span class=o>.</span><span class=n>index_fns</span><span class=o>.</span><span class=n>combine_indexes</span><span class=p>([</span><span class=n>p_columns</span><span class=p>,</span> <span class=n>input_list</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>columns</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>output_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>output</span><span class=p>,</span> <span class=n>columns</span><span class=o>=</span><span class=n>new_columns</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>output_df</span>
<span class=go>p1                                         1</span>
<span class=go>p2             2             3             4</span>
<span class=go>p3  False  False  False  False  False  False</span>
<span class=go>        a      b      a      b      a      b</span>
<span class=go>0       6      7      7      8      8      9</span>
<span class=go>1       9     10     10     11     11     12</span>
</code></pre></div> <ul> <li>Broadcasts objects in <code>input_list</code> to match the shape of objects in <code>output_list</code> through tiling. This is done to be able to compare them and generate signals, since we cannot compare NumPy arrays that have totally different shapes, such as (2, 2) and (2, 6).</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>new_input_list</span> <span class=o>=</span> <span class=p>[</span>
<span class=gp>... </span>    <span class=n>input_list</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>tile</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>param_list</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span> <span class=n>keys</span><span class=o>=</span><span class=n>p_columns</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>input_list</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>tile</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>param_list</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span> <span class=n>keys</span><span class=o>=</span><span class=n>p_columns</span><span class=p>)</span>
<span class=gp>... </span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>new_input_list</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<span class=go>p1                                         1</span>
<span class=go>p2             2             3             4</span>
<span class=go>p3  False  False  False  False  False  False</span>
<span class=go>        a      b      a      b      a      b</span>
<span class=go>0       1      1      1      1      1      1</span>
<span class=go>1       2      2      2      2      2      2</span>
</code></pre></div> <ul> <li>Builds parameter mappers that will link parameters from <code>param_list</code> to columns in <code>input_list</code> and <code>output_list</code>. This is done to enable column indexing using parameter values.</li> </ul> <hr> <h2 id=vectorbt.indicators.factory.IndicatorBase>IndicatorBase <span class=dobjtype>class</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2046-L2206 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>IndicatorBase</span><span class=p>(</span>
    <span class=n>wrapper</span><span class=p>,</span>
    <span class=n>input_list</span><span class=p>,</span>
    <span class=n>input_mapper</span><span class=p>,</span>
    <span class=n>in_output_list</span><span class=p>,</span>
    <span class=n>output_list</span><span class=p>,</span>
    <span class=n>param_list</span><span class=p>,</span>
    <span class=n>mapper_list</span><span class=p>,</span>
    <span class=n>short_name</span><span class=p>,</span>
    <span class=n>level_names</span>
<span class=p>)</span>
</code></pre></div> <p>Indicator base class.</p> <p>Properties should be set before instantiation.</p> <p><strong>Superclasses</strong></p> <ul> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver title=vectorbt.utils.attr_.AttrResolver>AttrResolver</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured title=vectorbt.utils.config.Configured>Configured</a></li> <li><a href=/api/utils/docs/#vectorbt.utils.docs.Documented title=vectorbt.utils.docs.Documented>Documented</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.IndexingBase title=vectorbt.base.indexing.IndexingBase>IndexingBase</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer title=vectorbt.base.indexing.PandasIndexer>PandasIndexer</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable title=vectorbt.utils.config.Pickleable>Pickleable</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin title=vectorbt.generic.plots_builder.PlotsBuilderMixin>PlotsBuilderMixin</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin title=vectorbt.generic.stats_builder.StatsBuilderMixin>StatsBuilderMixin</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping title=vectorbt.base.array_wrapper.Wrapping>Wrapping</a></li> </ul> <p><strong>Inherited members</strong></p> <ul> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver.deep_getattr title=vectorbt.base.array_wrapper.Wrapping.deep_getattr>AttrResolver.deep_getattr()</a></li> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver.post_resolve_attr title=vectorbt.base.array_wrapper.Wrapping.post_resolve_attr>AttrResolver.post_resolve_attr()</a></li> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver.pre_resolve_attr title=vectorbt.base.array_wrapper.Wrapping.pre_resolve_attr>AttrResolver.pre_resolve_attr()</a></li> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver.resolve_attr title=vectorbt.base.array_wrapper.Wrapping.resolve_attr>AttrResolver.resolve_attr()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.copy title=vectorbt.base.array_wrapper.Wrapping.copy>Configured.copy()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable.dumps title=vectorbt.base.array_wrapper.Wrapping.dumps>Configured.dumps()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable.loads title=vectorbt.base.array_wrapper.Wrapping.loads>Configured.loads()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.replace title=vectorbt.base.array_wrapper.Wrapping.replace>Configured.replace()</a></li> <li><a href=/api/utils/docs/#vectorbt.utils.docs.Documented.to_doc title=vectorbt.base.array_wrapper.Wrapping.to_doc>Configured.to_doc()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.update_config title=vectorbt.base.array_wrapper.Wrapping.update_config>Configured.update_config()</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer.xs title=vectorbt.base.array_wrapper.Wrapping.xs>PandasIndexer.xs()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable.load title=vectorbt.base.array_wrapper.Wrapping.load>Pickleable.load()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable.save title=vectorbt.base.array_wrapper.Wrapping.save>Pickleable.save()</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.build_subplots_doc title=vectorbt.generic.plots_builder.PlotsBuilderMixin.build_subplots_doc>PlotsBuilderMixin.build_subplots_doc()</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.override_subplots_doc title=vectorbt.generic.plots_builder.PlotsBuilderMixin.override_subplots_doc>PlotsBuilderMixin.override_subplots_doc()</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots>PlotsBuilderMixin.plots()</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots_defaults title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots_defaults>PlotsBuilderMixin.plots_defaults</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.build_metrics_doc title=vectorbt.generic.stats_builder.StatsBuilderMixin.build_metrics_doc>StatsBuilderMixin.build_metrics_doc()</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.override_metrics_doc title=vectorbt.generic.stats_builder.StatsBuilderMixin.override_metrics_doc>StatsBuilderMixin.override_metrics_doc()</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.generic.stats_builder.StatsBuilderMixin.stats>StatsBuilderMixin.stats()</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats_defaults title=vectorbt.generic.stats_builder.StatsBuilderMixin.stats_defaults>StatsBuilderMixin.stats_defaults</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.config title=vectorbt.base.array_wrapper.Wrapping.config>Wrapping.config</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer.iloc title=vectorbt.base.array_wrapper.Wrapping.iloc>Wrapping.iloc</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer.indexing_kwargs title=vectorbt.base.array_wrapper.Wrapping.indexing_kwargs>Wrapping.indexing_kwargs</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer.loc title=vectorbt.base.array_wrapper.Wrapping.loc>Wrapping.loc</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.regroup title=vectorbt.base.array_wrapper.Wrapping.regroup>Wrapping.regroup()</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.resolve_self title=vectorbt.base.array_wrapper.Wrapping.resolve_self>Wrapping.resolve_self()</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.select_one title=vectorbt.base.array_wrapper.Wrapping.select_one>Wrapping.select_one()</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.select_one_from_obj title=vectorbt.base.array_wrapper.Wrapping.select_one_from_obj>Wrapping.select_one_from_obj()</a></li> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver.self_aliases title=vectorbt.base.array_wrapper.Wrapping.self_aliases>Wrapping.self_aliases</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.wrapper title=vectorbt.base.array_wrapper.Wrapping.wrapper>Wrapping.wrapper</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.writeable_attrs title=vectorbt.base.array_wrapper.Wrapping.writeable_attrs>Wrapping.writeable_attrs</a></li> </ul> <p><strong>Subclasses</strong></p> <ul> <li><a href=/api/indicators/basic/#vectorbt.indicators.basic.ATR title=vectorbt.indicators.basic.ATR>ATR</a></li> <li><a href=/api/indicators/basic/#vectorbt.indicators.basic.BBANDS title=vectorbt.indicators.basic.BBANDS>BBANDS</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.BOLB title=vectorbt.labels.generators.BOLB>BOLB</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.FIXLB title=vectorbt.labels.generators.FIXLB>FIXLB</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.FMAX title=vectorbt.labels.generators.FMAX>FMAX</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.FMEAN title=vectorbt.labels.generators.FMEAN>FMEAN</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.FMIN title=vectorbt.labels.generators.FMIN>FMIN</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.FSTD title=vectorbt.labels.generators.FSTD>FSTD</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.LEXLB title=vectorbt.labels.generators.LEXLB>LEXLB</a></li> <li><a href=/api/indicators/basic/#vectorbt.indicators.basic.MA title=vectorbt.indicators.basic.MA>MA</a></li> <li><a href=/api/indicators/basic/#vectorbt.indicators.basic.MACD title=vectorbt.indicators.basic.MACD>MACD</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.MEANLB title=vectorbt.labels.generators.MEANLB>MEANLB</a></li> <li><a href=/api/indicators/basic/#vectorbt.indicators.basic.MSTD title=vectorbt.indicators.basic.MSTD>MSTD</a></li> <li><a href=/api/indicators/basic/#vectorbt.indicators.basic.OBV title=vectorbt.indicators.basic.OBV>OBV</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.OHLCSTCX title=vectorbt.signals.generators.OHLCSTCX>OHLCSTCX</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.OHLCSTX title=vectorbt.signals.generators.OHLCSTX>OHLCSTX</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.RAND title=vectorbt.signals.generators.RAND>RAND</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.RANDNX title=vectorbt.signals.generators.RANDNX>RANDNX</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.RANDX title=vectorbt.signals.generators.RANDX>RANDX</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.RPROB title=vectorbt.signals.generators.RPROB>RPROB</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.RPROBCX title=vectorbt.signals.generators.RPROBCX>RPROBCX</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.RPROBNX title=vectorbt.signals.generators.RPROBNX>RPROBNX</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.RPROBX title=vectorbt.signals.generators.RPROBX>RPROBX</a></li> <li><a href=/api/indicators/basic/#vectorbt.indicators.basic.RSI title=vectorbt.indicators.basic.RSI>RSI</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.STCX title=vectorbt.signals.generators.STCX>STCX</a></li> <li><a href=/api/indicators/basic/#vectorbt.indicators.basic.STOCH title=vectorbt.indicators.basic.STOCH>STOCH</a></li> <li><a href=/api/signals/generators/#vectorbt.signals.generators.STX title=vectorbt.signals.generators.STX>STX</a></li> <li><a href=/api/labels/generators/#vectorbt.labels.generators.TRENDLB title=vectorbt.labels.generators.TRENDLB>TRENDLB</a></li> </ul> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.in_output_names>in_output_names <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/utils/decorators.py#L33-L34 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.in_output_names title="Permanent link">&para;</a></h3> <p>Names of the in-place output arrays.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.indexing_func>indexing_func <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2148-L2186 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.indexing_func title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorBase</span><span class=o>.</span><span class=n>indexing_func</span><span class=p>(</span>
    <span class=n>pd_indexing_func</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Perform indexing on <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorBase title=vectorbt.indicators.factory.IndicatorBase>IndicatorBase</a>.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.input_names>input_names <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/utils/decorators.py#L33-L34 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.input_names title="Permanent link">&para;</a></h3> <p>Names of the input arrays.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.level_names>level_names <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2063-L2066 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.level_names title="Permanent link">&para;</a></h3> <p>Column level names corresponding to each parameter.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.output_flags>output_flags <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/utils/decorators.py#L33-L34 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.output_flags title="Permanent link">&para;</a></h3> <p>Dictionary of output flags.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.output_names>output_names <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/utils/decorators.py#L33-L34 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.output_names title="Permanent link">&para;</a></h3> <p>Names of the regular output arrays.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.param_names>param_names <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/utils/decorators.py#L33-L34 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.param_names title="Permanent link">&para;</a></h3> <p>Names of the parameters.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.run>run <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2193-L2196 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.run title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorBase</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Public run method.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.run_combs>run_combs <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2203-L2206 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.run_combs title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorBase</span><span class=o>.</span><span class=n>run_combs</span><span class=p>(</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Public run combinations method.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorBase.short_name>short_name <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2058-L2061 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorBase.short_name title="Permanent link">&para;</a></h3> <p>Name of the indicator.</p> <hr> <h2 id=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory <span class=dobjtype>class</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2209-L3923 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=p>(</span>
    <span class=n>class_name</span><span class=o>=</span><span class=s1>&#39;Indicator&#39;</span><span class=p>,</span>
    <span class=n>class_docstring</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span>
    <span class=n>module_name</span><span class=o>=</span><span class=s1>&#39;vectorbt.indicators.factory&#39;</span><span class=p>,</span>
    <span class=n>short_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>prepend_name</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>input_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>param_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>in_output_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>output_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>output_flags</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>custom_output_props</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>attr_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>metrics</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>stats_defaults</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>subplots</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>plots_defaults</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>A factory for creating new indicators.</p> <p>Initialize <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> to create a skeleton and then use a class method such as <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a> to bind a calculation function to the skeleton.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>class_name</code></strong> :&ensp;<code>str</code></dt> <dd>Name for the created indicator class.</dd> <dt><strong><code>class_docstring</code></strong> :&ensp;<code>str</code></dt> <dd>Docstring for the created indicator class.</dd> <dt><strong><code>module_name</code></strong> :&ensp;<code>str</code></dt> <dd>Specify the module the class originates from.</dd> <dt><strong><code>short_name</code></strong> :&ensp;<code>str</code></dt> <dd> <p>A short name of the indicator.</p> <p>Defaults to lower-case <code>class_name</code>.</p> </dd> <dt><strong><code>prepend_name</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to prepend <code>short_name</code> to each parameter level.</dd> <dt><strong><code>input_names</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd>A list of names of input arrays.</dd> <dt><strong><code>param_names</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd>A list of names of parameters.</dd> <dt><strong><code>in_output_names</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd> <p>A list of names of in-place output arrays.</p> <p>An in-place output is an output that is not returned but modified in-place. Some advantages of such outputs include:</p> <p>1) they don't need to be returned, 2) they can be passed between functions as easily as inputs, 3) they can be provided with already allocated data to safe memory, 4) if data or default value are not provided, they are created empty to not occupy memory.</p> </dd> <dt><strong><code>output_names</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd>A list of names of output arrays.</dd> <dt><strong><code>output_flags</code></strong> :&ensp;<code>dict</code></dt> <dd>A dictionary of in-place and regular output flags.</dd> <dt><strong><code>custom_output_props</code></strong> :&ensp;<code>dict</code></dt> <dd>A dictionary with user-defined functions that will be bound to the indicator class and wrapped with <code>@cached_property</code>.</dd> <dt><strong><code>attr_settings</code></strong> :&ensp;<code>dict</code></dt> <dd> <p>A dictionary of settings by attribute name.</p> <p>Attributes can be <code>input_names</code>, <code>in_output_names</code>, <code>output_names</code> and <code>custom_output_props</code>.</p> <p>Following keys are accepted:</p> <ul> <li><code>dtype</code>: Data type used to determine which methods to generate around this attribute. Set to None to disable. Default is <code>np.float_</code>. Can be set to instance of <code>collections.namedtuple</code> acting as enumerated type, or any other mapping; It will then create a property with suffix <code>readable</code> that contains data in a string format.</li> </ul> </dd> <dt><strong><code>metrics</code></strong> :&ensp;<code>dict</code></dt> <dd> <p>Metrics supported by <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.generic.stats_builder.StatsBuilderMixin.stats>StatsBuilderMixin.stats()</a>.</p> <p>If dict, will be converted to <a href=/api/utils/config/#vectorbt.utils.config.Config title=vectorbt.utils.config.Config>Config</a>.</p> </dd> <dt><strong><code>stats_defaults</code></strong> :&ensp;<code>callable</code> or <code>dict</code></dt> <dd> <p>Defaults for <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.generic.stats_builder.StatsBuilderMixin.stats>StatsBuilderMixin.stats()</a>.</p> <p>If dict, will be converted into a property.</p> </dd> <dt><strong><code>subplots</code></strong> :&ensp;<code>dict</code></dt> <dd> <p>Subplots supported by <a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots>PlotsBuilderMixin.plots()</a>.</p> <p>If dict, will be converted to <a href=/api/utils/config/#vectorbt.utils.config.Config title=vectorbt.utils.config.Config>Config</a>.</p> </dd> <dt><strong><code>plots_defaults</code></strong> :&ensp;<code>callable</code> or <code>dict</code></dt> <dd> <p>Defaults for <a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots>PlotsBuilderMixin.plots()</a>.</p> <p>If dict, will be converted into a property.</p> </dd> </dl> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The <code>__init__</code> method is not used for running the indicator, for this use <code>run</code>. The reason for this is indexing, which requires a clean <code>__init__</code> method for creating a new indicator object with newly indexed attributes.</p> </div> <p><strong>Subclasses</strong></p> <ul> <li><a href=/api/signals/factory/#vectorbt.signals.factory.SignalFactory title=vectorbt.signals.factory.SignalFactory>SignalFactory</a></li> </ul> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.find_ta_indicator>find_ta_indicator <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3763-L3773 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.find_ta_indicator title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>find_ta_indicator</span><span class=p>(</span>
    <span class=n>cls_name</span>
<span class=p>)</span>
</code></pre></div> <p>Get ta indicator class by its name.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.from_apply_func>from_apply_func <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3096-L3377 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.from_apply_func title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
    <span class=n>apply_func</span><span class=p>,</span>
    <span class=n>cache_func</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>pass_packed</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>kwargs_to_args</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>numba_loop</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Build indicator class around a custom apply function.</p> <p>In contrast to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a>, this method handles a lot of things for you, such as caching, parameter selection, and concatenation. Your part is writing a function <code>apply_func</code> that accepts a selection of parameters (single values as opposed to multiple values in <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a>) and does the calculation. It then automatically concatenates the resulting arrays into a single array per output.</p> <p>While this approach is simpler, it's also less flexible, since we can only work with one parameter selection at a time and can't view all parameters. The UDF <code>apply_func</code> also can't take keyword arguments, nor it can return anything other than outputs listed in <code>output_names</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If <code>apply_func</code> is a Numba-compiled function:</p> <ul> <li>All inputs are automatically converted to NumPy arrays</li> <li>Each argument in <code>*args</code> must be of a Numba-compatible type</li> <li>You cannot pass keyword arguments</li> <li>Your outputs must be arrays of the same shape, data type and data order</li> </ul> </div> <p><strong>Args</strong></p> <dl> <dt><strong><code>apply_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>A function that takes inputs, selection of parameters, and other arguments, and does calculations to produce outputs.</p> <p>Arguments are passed to <code>apply_func</code> in the following order:</p> <ul> <li><code>input_shape</code> if <code>pass_input_shape</code> is set to True and <code>input_shape</code> not in <code>kwargs_to_args</code></li> <li><code>col</code> if <code>per_column</code> and <code>pass_col</code> are set to True and <code>col</code> not in <code>kwargs_to_args</code></li> <li>broadcast time-series arrays corresponding to <code>input_names</code></li> <li>broadcast in-place output arrays corresponding to <code>in_output_names</code></li> <li>single parameter selection corresponding to <code>param_names</code></li> <li>variable arguments if <code>var_args</code> is set to True</li> <li>arguments listed in <code>kwargs_to_args</code></li> <li><code>flex_2d</code> if <code>pass_flex_2d</code> is set to True and <code>flex_2d</code> not in <code>kwargs_to_args</code></li> <li>keyword arguments if <code>apply_func</code> is not Numba-compiled</li> </ul> <p>Can be Numba-compiled.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Shape of each output should be the same and match the shape of each input.</p> </div> </dd> <dt><strong><code>cache_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>A caching function to preprocess data beforehand.</p> <p>Takes the same arguments as <code>apply_func</code>. Should return a single object or a tuple of objects. All returned objects will be passed unpacked as last arguments to <code>apply_func</code>.</p> <p>Can be Numba-compiled.</p> </dd> <dt><strong><code>pass_packed</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to pass packed tuples for inputs, in-place outputs, and parameters.</dd> <dt><strong><code>kwargs_to_args</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd> <p>Keyword arguments from <code>kwargs</code> dict to pass as positional arguments to the apply function.</p> <p>Should be used together with <code>numba_loop</code> set to True since Numba doesn't support variable keyword arguments.</p> <p>Defaults to []. Order matters.</p> </dd> <dt><strong><code>numba_loop</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to loop using Numba.</p> <p>Set to True when iterating large number of times over small input, but note that Numba doesn't support variable keyword arguments.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a>.</dd> </dl> <p><strong>Returns</strong></p> <p>Indicator Additionally, each run method now supports <code>use_ray</code> argument, which indicates whether to use Ray to execute <code>apply_func</code> in parallel. Only works with <code>numba_loop</code> set to False. See <a href=/api/base/combine_fns/#vectorbt.base.combine_fns.ray_apply title=vectorbt.base.combine_fns.ray_apply>ray_apply()</a> for related keyword arguments.</p> <p><strong>Usage</strong></p> <ul> <li>The following example produces the same indicator as the <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a> example.</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>ts1</span><span class=p>,</span> <span class=n>ts2</span><span class=p>,</span> <span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>ts1</span> <span class=o>*</span> <span class=n>p1</span> <span class=o>+</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>ts2</span> <span class=o>*</span> <span class=n>p2</span> <span class=o>+</span> <span class=n>arg2</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;ts1&#39;</span><span class=p>,</span> <span class=s1>&#39;ts2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;p1&#39;</span><span class=p>,</span> <span class=s1>&#39;p2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;o1&#39;</span><span class=p>,</span> <span class=s1>&#39;o2&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_apply_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>apply_func_nb</span><span class=p>,</span> <span class=n>var_args</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>kwargs_to_args</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;arg2&#39;</span><span class=p>],</span> <span class=n>arg2</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myInd</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>price</span> <span class=o>*</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=mi>100</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>myInd</span><span class=o>.</span><span class=n>o1</span>
<span class=go>custom_p1              1             2</span>
<span class=go>custom_p2              3             4</span>
<span class=go>                a      b      a      b</span>
<span class=go>2020-01-01  101.0  105.0  102.0  110.0</span>
<span class=go>2020-01-02  102.0  104.0  104.0  108.0</span>
<span class=go>2020-01-03  103.0  103.0  106.0  106.0</span>
<span class=go>2020-01-04  104.0  102.0  108.0  104.0</span>
<span class=go>2020-01-05  105.0  101.0  110.0  102.0</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>myInd</span><span class=o>.</span><span class=n>o2</span>
<span class=go>custom_p1              1             2</span>
<span class=go>custom_p2              3             4</span>
<span class=go>                a      b      a      b</span>
<span class=go>2020-01-01  206.0  230.0  208.0  240.0</span>
<span class=go>2020-01-02  212.0  224.0  216.0  232.0</span>
<span class=go>2020-01-03  218.0  218.0  224.0  224.0</span>
<span class=go>2020-01-04  224.0  212.0  232.0  216.0</span>
<span class=go>2020-01-05  230.0  206.0  240.0  208.0</span>
</code></pre></div> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>from_custom_func <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2616-L3094 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_custom_func</span><span class=p>(</span>
    <span class=n>custom_func</span><span class=p>,</span>
    <span class=n>require_input_shape</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>param_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>in_output_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>hide_params</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>hide_default</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>var_args</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>keyword_only_args</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>pipeline_kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Build indicator class around a custom calculation function.</p> <p>In contrast to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_apply_func title=vectorbt.indicators.factory.IndicatorFactory.from_apply_func>IndicatorFactory.from_apply_func()</a>, this method offers full flexbility. It's up to we to handle caching and concatenate columns for each parameter (for example, by using <a href=/api/base/combine_fns/#vectorbt.base.combine_fns.apply_and_concat_one title=vectorbt.base.combine_fns.apply_and_concat_one>apply_and_concat_one()</a>). Also, you should ensure that each output array has an appropriate number of columns, which is the number of columns in input arrays multiplied by the number of parameter combinations.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>custom_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>A function that takes broadcast arrays corresponding to <code>input_names</code>, broadcast in-place output arrays corresponding to <code>in_output_names</code>, broadcast parameter arrays corresponding to <code>param_names</code>, and other arguments and keyword arguments, and returns outputs corresponding to <code>output_names</code> and other objects that are then returned with the indicator instance.</p> <p>Can be Numba-compiled.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Shape of each output should be the same and match the shape of each input stacked n times (= the number of parameter values) along the column axis.</p> </div> </dd> <dt><strong><code>require_input_shape</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to input shape is required.</dd> <dt><strong><code>param_settings</code></strong> :&ensp;<code>dict</code></dt> <dd> <p>A dictionary of parameter settings keyed by name. See <a href=/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline title=vectorbt.indicators.factory.run_pipeline>run_pipeline()</a> for keys.</p> <p>Can be overwritten by any run method.</p> </dd> <dt><strong><code>in_output_settings</code></strong> :&ensp;<code>dict</code></dt> <dd> <p>A dictionary of in-place output settings keyed by name. See <a href=/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline title=vectorbt.indicators.factory.run_pipeline>run_pipeline()</a> for keys.</p> <p>Can be overwritten by any run method.</p> </dd> <dt><strong><code>hide_params</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd> <p>Parameter names to hide column levels for.</p> <p>Can be overwritten by any run method.</p> </dd> <dt><strong><code>hide_default</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to hide column levels of parameters with default value.</p> <p>Can be overwritten by any run method.</p> </dd> <dt><strong><code>var_args</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether run methods should accept variable arguments (<code>*args</code>).</p> <p>Set to True if <code>custom_func</code> accepts positional agruments that are not listed in the config.</p> </dd> <dt><strong><code>keyword_only_args</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether run methods should accept keyword-only arguments (<code>*</code>).</p> <p>Set to True to force the user to use keyword arguments (e.g., to avoid misplacing arguments).</p> </dd> <dt><strong><code>**pipeline_kwargs</code></strong></dt> <dd> <p>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline title=vectorbt.indicators.factory.run_pipeline>run_pipeline()</a>.</p> <p>Can be overwritten by any run method.</p> <p>Can contain default values for <code>param_names</code> and <code>in_output_names</code>, but also custom positional and keyword arguments passed to the <code>custom_func</code>.</p> </dd> </dl> <p><strong>Returns</strong></p> <p><code>Indicator</code>, and optionally other objects that are returned by <code>custom_func</code> and exceed <code>output_names</code>. <strong>Usage</strong></p> <ul> <li>The following example produces the same indicator as the <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_apply_func title=vectorbt.indicators.factory.IndicatorFactory.from_apply_func>IndicatorFactory.from_apply_func()</a> example.</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>apply_func_nb</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>ts1</span><span class=p>,</span> <span class=n>ts2</span><span class=p>,</span> <span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>ts1</span> <span class=o>*</span> <span class=n>p1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>ts2</span> <span class=o>*</span> <span class=n>p2</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>arg2</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>custom_func</span><span class=p>(</span><span class=n>ts1</span><span class=p>,</span> <span class=n>ts2</span><span class=p>,</span> <span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>vbt</span><span class=o>.</span><span class=n>base</span><span class=o>.</span><span class=n>combine_fns</span><span class=o>.</span><span class=n>apply_and_concat_multiple_nb</span><span class=p>(</span>
<span class=gp>... </span>        <span class=nb>len</span><span class=p>(</span><span class=n>p1</span><span class=p>),</span> <span class=n>apply_func_nb</span><span class=p>,</span> <span class=n>ts1</span><span class=p>,</span> <span class=n>ts2</span><span class=p>,</span> <span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MyInd</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;ts1&#39;</span><span class=p>,</span> <span class=s1>&#39;ts2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;p1&#39;</span><span class=p>,</span> <span class=s1>&#39;p2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;o1&#39;</span><span class=p>,</span> <span class=s1>&#39;o2&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_custom_func</span><span class=p>(</span><span class=n>custom_func</span><span class=p>,</span> <span class=n>var_args</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>arg2</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>myInd</span> <span class=o>=</span> <span class=n>MyInd</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>price</span> <span class=o>*</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=mi>100</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>myInd</span><span class=o>.</span><span class=n>o1</span>
<span class=go>custom_p1              1             2</span>
<span class=go>custom_p2              3             4</span>
<span class=go>                a      b      a      b</span>
<span class=go>2020-01-01  101.0  105.0  102.0  110.0</span>
<span class=go>2020-01-02  102.0  104.0  104.0  108.0</span>
<span class=go>2020-01-03  103.0  103.0  106.0  106.0</span>
<span class=go>2020-01-04  104.0  102.0  108.0  104.0</span>
<span class=go>2020-01-05  105.0  101.0  110.0  102.0</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>myInd</span><span class=o>.</span><span class=n>o2</span>
<span class=go>custom_p1              1             2</span>
<span class=go>custom_p2              3             4</span>
<span class=go>                a      b      a      b</span>
<span class=go>2020-01-01  206.0  230.0  208.0  240.0</span>
<span class=go>2020-01-02  212.0  224.0  216.0  232.0</span>
<span class=go>2020-01-03  218.0  218.0  224.0  224.0</span>
<span class=go>2020-01-04  224.0  212.0  232.0  216.0</span>
<span class=go>2020-01-05  230.0  206.0  240.0  208.0</span>
</code></pre></div> <p>The difference between <code>apply_func_nb</code> here and in <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_apply_func title=vectorbt.indicators.factory.IndicatorFactory.from_apply_func>IndicatorFactory.from_apply_func()</a> is that here it takes the index of the current parameter combination that can be used for parameter selection. You can also remove the entire <code>apply_func_nb</code> and define your logic in <code>custom_func</code> (which shouldn't necessarily be Numba-compiled):</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>custom_func</span><span class=p>(</span><span class=n>ts1</span><span class=p>,</span> <span class=n>ts2</span><span class=p>,</span> <span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>input_shape</span> <span class=o>=</span> <span class=n>ts1</span><span class=o>.</span><span class=n>shape</span>
<span class=gp>... </span>    <span class=n>n_params</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>p1</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>out1</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>((</span><span class=n>input_shape</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>input_shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>n_params</span><span class=p>),</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float_</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>out2</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>((</span><span class=n>input_shape</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>input_shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>n_params</span><span class=p>),</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float_</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n_params</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>input_shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]):</span>
<span class=gp>... </span>            <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>input_shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]):</span>
<span class=gp>... </span>                <span class=n>out1</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>input_shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>k</span> <span class=o>+</span> <span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>ts1</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>]</span> <span class=o>*</span> <span class=n>p1</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>arg1</span>
<span class=gp>... </span>                <span class=n>out2</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>input_shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>k</span> <span class=o>+</span> <span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>ts2</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=n>col</span><span class=p>]</span> <span class=o>*</span> <span class=n>p2</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>arg2</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>out1</span><span class=p>,</span> <span class=n>out2</span>
</code></pre></div> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.from_pandas_ta>from_pandas_ta <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3601-L3744 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.from_pandas_ta title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_pandas_ta</span><span class=p>(</span>
    <span class=n>func_name</span><span class=p>,</span>
    <span class=n>parse_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>init_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Build an indicator class around a pandas-ta function.</p> <p>Requires <a href=https://github.com/twopirllc/pandas-ta>pandas-ta</a> installed.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>func_name</code></strong> :&ensp;<code>str</code></dt> <dd>Function name.</dd> <dt><strong><code>parse_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.parse_pandas_ta_config title=vectorbt.indicators.factory.IndicatorFactory.parse_pandas_ta_config>IndicatorFactory.parse_pandas_ta_config()</a>.</dd> <dt><strong><code>init_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a>.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a>.</dd> </dl> <p><strong>Returns</strong></p> <p>Indicator <strong>Usage</strong></p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>SMA</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_pandas_ta</span><span class=p>(</span><span class=s1>&#39;SMA&#39;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span> <span class=o>=</span> <span class=n>SMA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>length</span><span class=o>=</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span><span class=o>.</span><span class=n>sma</span>
<span class=go>sma_length         2         3</span>
<span class=go>              a    b    a    b</span>
<span class=go>2020-01-01  NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-02  1.5  4.5  NaN  NaN</span>
<span class=go>2020-01-03  2.5  3.5  2.0  4.0</span>
<span class=go>2020-01-04  3.5  2.5  3.0  3.0</span>
<span class=go>2020-01-05  4.5  1.5  4.0  2.0</span>
</code></pre></div> <ul> <li>To get help on running the indicator, use the <code>help</code> command:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>help</span><span class=p>(</span><span class=n>SMA</span><span class=o>.</span><span class=n>run</span><span class=p>)</span>
<span class=go>Help on method run:</span>

<span class=go>run(close, length=None, offset=None, short_name=&#39;sma&#39;, hide_params=None, hide_default=True, **kwargs) method of builtins.type instance</span>
<span class=go>    Run `SMA` indicator.</span>

<span class=go>    * Inputs: `close`</span>
<span class=go>    * Parameters: `length`, `offset`</span>
<span class=go>    * Outputs: `sma`</span>

<span class=go>    Pass a list of parameter names as `hide_params` to hide their column levels.</span>
<span class=go>    Set `hide_default` to False to show the column levels of the parameters with a default value.</span>

<span class=go>    Other keyword arguments are passed to [run_pipeline()](/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline &quot;vectorbt.indicators.factory.run_pipeline&quot;).</span>
</code></pre></div> <ul> <li>To get the indicator docstring, use the <code>help</code> command or print the <code>__doc__</code> attribute:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>SMA</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>
<span class=go>Simple Moving Average (SMA)</span>

<span class=go>The Simple Moving Average is the classic moving average that is the equally</span>
<span class=go>weighted average over n periods.</span>

<span class=go>Sources:</span>
<span class=go>    &lt;https://www.tradingtechnologies.com/help/x-study/technical-indicator-definitions/simple-moving-average-sma/&gt;</span>

<span class=go>Calculation:</span>
<span class=go>    Default Inputs:</span>
<span class=go>        length=10</span>
<span class=go>    SMA = SUM(close, length) / length</span>

<span class=go>Args:</span>
<span class=go>    close (pd.Series): Series of &#39;close&#39;s</span>
<span class=go>    length (int): It&#39;s period. Default: 10</span>
<span class=go>    offset (int): How many periods to offset the result. Default: 0</span>

<span class=go>Kwargs:</span>
<span class=go>    adjust (bool): Default: True</span>
<span class=go>    presma (bool, optional): If True, uses SMA for initial value.</span>
<span class=go>    fillna (value, optional): pd.DataFrame.fillna(value)</span>
<span class=go>    fill_method (value, optional): Type of fill method</span>

<span class=go>Returns:</span>
<span class=go>    pd.Series: New feature generated.</span>
</code></pre></div> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.from_ta>from_ta <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3813-L3923 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.from_ta title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_ta</span><span class=p>(</span>
    <span class=n>cls_name</span><span class=p>,</span>
    <span class=n>init_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Build an indicator class around a ta class.</p> <p>Requires <a href=https://github.com/bukosabino/ta>ta</a> installed.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>cls_name</code></strong> :&ensp;<code>str</code></dt> <dd>Class name.</dd> <dt><strong><code>init_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a>.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a>.</dd> </dl> <p><strong>Returns</strong></p> <p>Indicator <strong>Usage</strong></p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>SMAIndicator</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_ta</span><span class=p>(</span><span class=s1>&#39;SMAIndicator&#39;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span> <span class=o>=</span> <span class=n>SMAIndicator</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>window</span><span class=o>=</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span><span class=o>.</span><span class=n>sma_indicator</span>
<span class=go>smaindicator_window    2         3</span>
<span class=go>                       a    b    a    b</span>
<span class=go>2020-01-01           NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-02           1.5  4.5  NaN  NaN</span>
<span class=go>2020-01-03           2.5  3.5  2.0  4.0</span>
<span class=go>2020-01-04           3.5  2.5  3.0  3.0</span>
<span class=go>2020-01-05           4.5  1.5  4.0  2.0</span>
</code></pre></div> <ul> <li>To get help on running the indicator, use the <code>help</code> command:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>help</span><span class=p>(</span><span class=n>SMAIndicator</span><span class=o>.</span><span class=n>run</span><span class=p>)</span>
<span class=go>Help on method run:</span>

<span class=go>run(close, window, fillna=False, short_name=&#39;smaindicator&#39;, hide_params=None, hide_default=True, **kwargs) method of builtins.type instance</span>
<span class=go>    Run `SMAIndicator` indicator.</span>

<span class=go>    * Inputs: `close`</span>
<span class=go>    * Parameters: `window`, `fillna`</span>
<span class=go>    * Outputs: `sma_indicator`</span>

<span class=go>    Pass a list of parameter names as `hide_params` to hide their column levels.</span>
<span class=go>    Set `hide_default` to False to show the column levels of the parameters with a default value.</span>

<span class=go>    Other keyword arguments are passed to [run_pipeline()](/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline &quot;vectorbt.indicators.factory.run_pipeline&quot;).</span>
</code></pre></div> <ul> <li>To get the indicator docstring, use the <code>help</code> command or print the <code>__doc__</code> attribute:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>SMAIndicator</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>
<span class=go>SMA - Simple Moving Average</span>

<span class=go>    Args:</span>
<span class=go>        close(pandas.Series): dataset &#39;Close&#39; column.</span>
<span class=go>        window(int): n period.</span>
<span class=go>        fillna(bool): if True, fill nan values.</span>
</code></pre></div> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.from_talib>from_talib <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3386-L3491 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.from_talib title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_talib</span><span class=p>(</span>
    <span class=n>func_name</span><span class=p>,</span>
    <span class=n>init_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Build an indicator class around a TA-Lib function.</p> <p>Requires <a href=https://github.com/mrjbq7/ta-lib>TA-Lib</a> installed.</p> <p>For input, parameter and output names, see <a href=https://github.com/mrjbq7/ta-lib/blob/master/docs/index.md>docs</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>func_name</code></strong> :&ensp;<code>str</code></dt> <dd>Function name.</dd> <dt><strong><code>init_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a>.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func title=vectorbt.indicators.factory.IndicatorFactory.from_custom_func>IndicatorFactory.from_custom_func()</a>.</dd> </dl> <p><strong>Returns</strong></p> <p>Indicator <strong>Usage</strong></p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>SMA</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_talib</span><span class=p>(</span><span class=s1>&#39;SMA&#39;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span> <span class=o>=</span> <span class=n>SMA</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>timeperiod</span><span class=o>=</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span><span class=o>.</span><span class=n>real</span>
<span class=go>sma_timeperiod         2         3</span>
<span class=go>                  a    b    a    b</span>
<span class=go>2020-01-01      NaN  NaN  NaN  NaN</span>
<span class=go>2020-01-02      1.5  4.5  NaN  NaN</span>
<span class=go>2020-01-03      2.5  3.5  2.0  4.0</span>
<span class=go>2020-01-04      3.5  2.5  3.0  3.0</span>
<span class=go>2020-01-05      4.5  1.5  4.0  2.0</span>
</code></pre></div> <ul> <li>To get help on running the indicator, use the <code>help</code> command:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>help</span><span class=p>(</span><span class=n>SMA</span><span class=o>.</span><span class=n>run</span><span class=p>)</span>
<span class=go>Help on method run:</span>

<span class=go>run(close, timeperiod=30, short_name=&#39;sma&#39;, hide_params=None, hide_default=True, **kwargs) method of builtins.type instance</span>
<span class=go>    Run `SMA` indicator.</span>

<span class=go>    * Inputs: `close`</span>
<span class=go>    * Parameters: `timeperiod`</span>
<span class=go>    * Outputs: `real`</span>

<span class=go>    Pass a list of parameter names as `hide_params` to hide their column levels.</span>
<span class=go>    Set `hide_default` to False to show the column levels of the parameters with a default value.</span>

<span class=go>    Other keyword arguments are passed to [run_pipeline()](/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline &quot;vectorbt.indicators.factory.run_pipeline&quot;).</span>
</code></pre></div> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.get_pandas_ta_indicators>get_pandas_ta_indicators <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3583-L3599 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.get_pandas_ta_indicators title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>get_pandas_ta_indicators</span><span class=p>(</span>
    <span class=n>silence_warnings</span><span class=o>=</span><span class=kc>True</span>
<span class=p>)</span>
</code></pre></div> <p>Get all pandas-ta indicators.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Returns only the indicators that have been successfully parsed.</p> </div> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.get_ta_indicators>get_ta_indicators <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3746-L3761 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.get_ta_indicators title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>get_ta_indicators</span><span class=p>()</span>
</code></pre></div> <p>Get all ta indicators.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.get_talib_indicators>get_talib_indicators <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3379-L3384 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.get_talib_indicators title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>get_talib_indicators</span><span class=p>()</span>
</code></pre></div> <p>Get all TA-Lib indicators.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.parse_pandas_ta_config>parse_pandas_ta_config <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3493-L3581 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.parse_pandas_ta_config title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>parse_pandas_ta_config</span><span class=p>(</span>
    <span class=n>func</span><span class=p>,</span>
    <span class=n>test_input_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>test_index_len</span><span class=o>=</span><span class=mi>100</span>
<span class=p>)</span>
</code></pre></div> <p>Get the config of a pandas-ta indicator.</p> <hr> <h3 id=vectorbt.indicators.factory.IndicatorFactory.parse_ta_config>parse_ta_config <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L3775-L3811 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.IndicatorFactory.parse_ta_config title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>parse_ta_config</span><span class=p>(</span>
    <span class=n>ind_cls</span>
<span class=p>)</span>
</code></pre></div> <p>Get the config of a ta indicator.</p> <hr> <h2 id=vectorbt.indicators.factory.MetaIndicatorBase>MetaIndicatorBase <span class=dobjtype>class</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/9155bddebc634846b419e261f9058cbda708bbdc/vectorbt/indicators/factory.py#L2042-L2043 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.indicators.factory.MetaIndicatorBase title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>MetaIndicatorBase</span><span class=p>(</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Meta class that exposes a read-only class property <code>StatsBuilderMixin.metrics</code>.</p> <p><strong>Superclasses</strong></p> <ul> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.MetaPlotsBuilderMixin title=vectorbt.generic.plots_builder.MetaPlotsBuilderMixin>MetaPlotsBuilderMixin</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.MetaStatsBuilderMixin title=vectorbt.generic.stats_builder.MetaStatsBuilderMixin>MetaStatsBuilderMixin</a></li> <li><code>builtins.type</code></li> </ul> <p><strong>Inherited members</strong></p> <ul> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.MetaPlotsBuilderMixin.subplots title=vectorbt.generic.plots_builder.MetaPlotsBuilderMixin.subplots>MetaPlotsBuilderMixin.subplots</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.MetaStatsBuilderMixin.metrics title=vectorbt.generic.stats_builder.MetaStatsBuilderMixin.metrics>MetaStatsBuilderMixin.metrics</a></li> </ul> <footer class=sponsorship> <hr> <a href=https://github.com/sponsors/polakowo title="Become a sponsor"> <span class="twemoji heart-throb-hover"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/></svg> </span> </a> <hr> </footer> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021 Oleg Polakow. All rights reserved. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/polakowo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.instant", "search.suggest", "search.share"], "search": "../../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.51d95adb.min.js></script> <script src=../../../assets/javascripts/extra.js></script> </body> </html>